<!DOCTYPE html> 
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Escape Game Pro â€“ Mission Forum</title>
    <link href="https://fonts.googleapis.com/css2?family=Muli:wght@400;600;700;800&display=swap" rel="stylesheet">
    <!-- BibliothÃ¨que jsPDF pour gÃ©nÃ©rer des PDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js">
        
    <script>
// ==================== INITIALISATION ====================
(function() {
    'use strict';
    
    console.log('ðŸš€ DÃ©marrage du script...');

    // Variables globales
    const state = {
        currentLanguage: 'fr',
        currentPage: 1,
        playerData: {
            firstName: '',
            lastName: '',
            cvFile: null
        },
        gameData: {
            badges: [],
            completedChallenges: [],
            visitedCompanies: [],
            points: 0,
            mobility: {
                steps: 0,
                bike: 0,
                publicTransport: false,
                carpool: false
            }
        }
    };

    const challengePoints = {
        1: 100, 2: 150, 3: 200, 4: 300, 5: 500, 6: 250
    };

    const pointsRewards = {
        0: { name: 'DÃ©butant MotivÃ©', icon: 'ðŸŒŸ', color: '#2897d5' },
        500: { name: 'Candidat Actif', icon: 'ðŸš€', color: '#95c11f' },
        1000: { name: 'Pro du Networking', icon: 'ðŸ¤', color: '#f39200' },
        1500: { name: 'Expert Mission', icon: 'ðŸ†', color: '#d60b52' },
        2000: { name: 'LÃ©gende du Forum', icon: 'ðŸ‘‘', color: '#a3195b' }
    };

    const sectorsData = {
        tech: {
            name: { fr: 'Tech & Digital', es: 'Tech & Digital' },
            companies: [
                { name: 'WebDev Solutions', info: 'DÃ©veloppement web et applications mobiles', tags: ['Dev', 'Web', 'Mobile'] },
                { name: 'AI Innovations', info: 'Intelligence artificielle et machine learning', tags: ['IA', 'Data', 'Innovation'] },
                { name: 'CyberSec Pro', info: 'CybersÃ©curitÃ© et protection des donnÃ©es', tags: ['SÃ©curitÃ©', 'RÃ©seau', 'Protection'] },
                { name: 'Cloud Systems', info: 'Solutions cloud et infrastructure', tags: ['Cloud', 'Infra', 'SystÃ¨me'] },
                { name: 'UX Design Studio', info: 'Design d\'expÃ©rience utilisateur', tags: ['UX', 'Design', 'Interface'] }
            ]
        },
        resto: {
            name: { fr: 'Restauration', es: 'RestauraciÃ³n' },
            companies: [
                { name: 'Le Gourmet', info: 'Restaurant gastronomique franÃ§ais', tags: ['Chef', 'Gastro', 'Service'] },
                { name: 'Pizza Express', info: 'Pizzeria rapide et livraison', tags: ['Rapide', 'Livraison', 'Italien'] },
                { name: 'CafÃ© Central', info: 'CafÃ©-brasserie du centre-ville', tags: ['CafÃ©', 'Brasserie', 'Accueil'] },
                { name: 'Traiteur Deluxe', info: 'Service traiteur Ã©vÃ©nementiel', tags: ['Traiteur', 'Ã‰vÃ©nement', 'Buffet'] }
            ]
        },
        sante: {
            name: { fr: 'SantÃ© & Social', es: 'Salud & Social' },
            companies: [
                { name: 'Clinique Saint-Martin', info: 'Ã‰tablissement de soins privÃ©', tags: ['Clinique', 'Soins', 'MÃ©dical'] },
                { name: 'EHPAD Les Jardins', info: 'Maison de retraite mÃ©dicalisÃ©e', tags: ['EHPAD', 'Seniors', 'Accompagnement'] }
            ]
        },
        commerce: {
            name: { fr: 'Commerce', es: 'Comercio' },
            companies: [
                { name: 'Galeries Lafayette', info: 'Grand magasin mode et luxe', tags: ['Mode', 'Luxe', 'Conseil'] },
                { name: 'SuperMarchÃ© Bio', info: 'Alimentation biologique', tags: ['Bio', 'Alimentaire', 'Ã‰cologie'] }
            ]
        },
        artisan: {
            name: { fr: 'Artisanat & BTP', es: 'ArtesanÃ­a & BTP' },
            companies: [
                { name: 'Menuiserie Dubois', info: 'Menuiserie traditionnelle et moderne', tags: ['Bois', 'Meuble', 'Artisan'] },
                { name: 'Ã‰lectricitÃ© Pro', info: 'Installation Ã©lectrique rÃ©sidentielle', tags: ['Ã‰lectricitÃ©', 'Installation', 'RÃ©sidentiel'] }
            ]
        },
        service: {
            name: { fr: 'Services', es: 'Servicios' },
            companies: [
                { name: 'Banque Populaire', info: 'Services bancaires et financiers', tags: ['Banque', 'Finance', 'Conseil'] },
                { name: 'Assurance Vie', info: 'Assurances tous risques', tags: ['Assurance', 'Protection', 'Conseil'] }
            ]
        },
        tourisme: {
            name: { fr: 'Tourisme & HÃ´tellerie', es: 'Turismo & HostelerÃ­a' },
            companies: [
                { name: 'HÃ´tel 4 Ã‰toiles', info: 'HÃ´tellerie de luxe centre-ville', tags: ['HÃ´tel', 'Luxe', 'Accueil'] },
                { name: 'Camping Les Pins', info: 'Camping familial 3 Ã©toiles', tags: ['Camping', 'Famille', 'Nature'] }
            ]
        },
        transport: {
            name: { fr: 'Transport & Logistique', es: 'Transporte & LogÃ­stica' },
            companies: [
                { name: 'Transport Rapide', info: 'Transport routier de marchandises', tags: ['Transport', 'Routier', 'Marchandise'] },
                { name: 'Logistique Stock', info: 'Entreposage et distribution', tags: ['Logistique', 'Stock', 'Distribution'] }
            ]
        }
    };

    // ==================== FONCTIONS ====================
    
    function showStandInfo(sectorId) {
        console.log('âœ… showStandInfo appelÃ© pour:', sectorId);
        
        const sector = sectorsData[sectorId];
        if (!sector) {
            alert('Secteur non trouvÃ©: ' + sectorId);
            return;
        }

        const modal = document.getElementById('companyModal');
        const title = document.getElementById('modalTitle');
        const grid = document.getElementById('companiesGrid');

        title.textContent = sector.name[state.currentLanguage];
        grid.innerHTML = '';

        sector.companies.forEach((company, idx) => {
            const card = document.createElement('div');
            card.className = 'company-card';
            card.innerHTML = `
                <div class="company-name">${company.name}</div>
                <div class="company-info">${company.info}</div>
                <div class="company-tags">
                    ${company.tags.map(t => `<span class="tag">${t}</span>`).join('')}
                </div>
            `;
            grid.appendChild(card);
        });

        modal.style.display = 'block';
    }

    function closeModal() {
        document.getElementById('companyModal').style.display = 'none';
    }

    function showPage(pageNum) {
        console.log('ðŸ“„ Changement vers page', pageNum);
        
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        
        const page = document.getElementById('page' + pageNum);
        const navBtn = document.querySelectorAll('.nav-btn')[pageNum - 1];
        
        if (page) page.classList.add('active');
        if (navBtn) navBtn.classList.add('active');
        
        state.currentPage = pageNum;
    }

    function registerPlayer() {
        const name = state.playerData.firstName || 'Joueur';
        const info = document.getElementById('playerInfo');
        const nameEl = document.getElementById('playerName');
        
        if (nameEl) nameEl.textContent = name;
        if (info) info.style.display = 'block';
    }

    function updateIdentity() {
        state.playerData.firstName = document.getElementById('firstName')?.value || '';
        state.playerData.lastName = document.getElementById('lastName')?.value || '';
    }

    function updateCompaniesCounter() {
        const inputs = document.querySelectorAll('.company-name-input');
        let count = 0;
        state.gameData.visitedCompanies = [];
        
        inputs.forEach(input => {
            if (input.value.trim()) {
                count++;
                state.gameData.visitedCompanies.push(input.value.trim());
            }
        });
        
        const counter = document.getElementById('companiesVisitedCounter');
        if (counter) counter.textContent = count;
    }

    function toggleCheck(checkbox) {
        checkbox.classList.toggle('checked');
    }

    function completeChallenge(card, level) {
        if (state.gameData.completedChallenges.includes(level)) return;
        
        state.gameData.completedChallenges.push(level);
        card.classList.add('completed');
        state.gameData.points += challengePoints[level];
        
        alert(`DÃ©fi ${level} accompli ! +${challengePoints[level]} points !`);
    }

    function selectQuestion(item) {
        document.querySelectorAll('.question-item').forEach(q => q.classList.remove('selected'));
        item.classList.add('selected');
    }

    function unlockBadge(badge, level) {
        if (state.gameData.badges.includes(level)) return;
        
        state.gameData.badges.push(level);
        badge.classList.add('unlocked');
        alert(`Badge ${level} dÃ©bloquÃ© !`);
    }

    function updateMobility() {
        const steps = parseFloat(document.getElementById('steps')?.value) || 0;
        const bike = parseFloat(document.getElementById('bike')?.value) || 0;
        const publicTransport = document.getElementById('publicTransport')?.checked || false;
        const carpool = document.getElementById('carpool')?.checked || false;
        
        state.gameData.mobility = { steps, bike, publicTransport, carpool };
        
        let score = Math.floor(steps / 100) + (bike * 20);
        if (publicTransport) score += 50;
        if (carpool) score += 30;
        
        const scoreEl = document.getElementById('ecoScore');
        if (scoreEl) scoreEl.textContent = score;
    }

    // ==================== INITIALISATION ====================
    
    function init() {
        console.log('ðŸŽ¯ Initialisation des Ã©vÃ©nements...');

        // Secteurs
        const sectorMap = {
            'tech-sector': 'tech',
            'resto-sector': 'resto',
            'sante-sector': 'sante',
            'commerce-sector': 'commerce',
            'artisan-sector': 'artisan',
            'service-sector': 'service',
            'tourisme-sector': 'tourisme',
            'transport-sector': 'transport'
        };

        document.querySelectorAll('.sector-stand').forEach(sector => {
            sector.addEventListener('click', function(e) {
                e.stopPropagation();
                console.log('ðŸ–±ï¸ Clic sur secteur');
                
                for (const [className, sectorId] of Object.entries(sectorMap)) {
                    if (this.classList.contains(className)) {
                        showStandInfo(sectorId);
                        return;
                    }
                }
                
                if (this.classList.contains('custom-sector')) {
                    alert('Fonction secteur personnalisÃ© Ã  venir');
                }
            });
        });

        // Navigation
        document.querySelectorAll('.nav-btn').forEach((btn, i) => {
            btn.addEventListener('click', () => showPage(i + 1));
        });

        // Modals
        document.getElementById('companyModal')?.addEventListener('click', function(e) {
            if (e.target === this) closeModal();
        });

        document.querySelector('.close')?.addEventListener('click', closeModal);

        // IdentitÃ©
        document.getElementById('firstName')?.addEventListener('input', updateIdentity);
        document.getElementById('lastName')?.addEventListener('input', updateIdentity);

        // EntrÃ©e
        document.querySelector('.entrance-sign')?.addEventListener('click', registerPlayer);

        // Inputs entreprises
        document.querySelectorAll('.company-name-input').forEach(input => {
            input.addEventListener('input', updateCompaniesCounter);
        });

        // Checkboxes
        document.querySelectorAll('.custom-checkbox').forEach(cb => {
            cb.addEventListener('click', function() {
                toggleCheck(this);
            });
        });

        // DÃ©fis
        document.querySelectorAll('.challenge-card').forEach((card, i) => {
            card.addEventListener('click', function() {
                completeChallenge(this, i + 1);
            });
        });

        // Questions
        document.querySelectorAll('.question-item').forEach(item => {
            item.addEventListener('click', function() {
                selectQuestion(this);
            });
        });

        // Badges
        document.querySelectorAll('.badge-sticker').forEach((badge, i) => {
            badge.addEventListener('click', function() {
                unlockBadge(this, i + 1);
            });
        });

        // MobilitÃ©
        ['steps', 'bike', 'publicTransport', 'carpool'].forEach(id => {
            document.getElementById(id)?.addEventListener('change', updateMobility);
        });

        console.log('âœ… Ã‰vÃ©nements attachÃ©s !');
        console.log('ðŸ“Š Nombre de secteurs:', document.querySelectorAll('.sector-stand').length);
        
        showPage(1);
        updateMobility();
    }

    // DÃ©marrage
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', init);
    } else {
        init();
    }

})();
</script>    
    <style>
        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Muli', Arial, sans-serif;
            background: #f5f5f5;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* ArriÃ¨re-plan avec visuel */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 15% 20%, #f39200 0%, transparent 25%),
                radial-gradient(circle at 85% 80%, #2897d5 0%, transparent 30%),
                linear-gradient(45deg, transparent 40%, #95c11f 40%, #95c11f 60%, transparent 60%),
                conic-gradient(from 45deg at 70% 30%, transparent 0deg, #d60b52 90deg, transparent 180deg);
            opacity: 0.12;
            z-index: -2;
            pointer-events: none;
        }

        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 15% 20%, #f39200 0%, transparent 25%),
                radial-gradient(circle at 85% 80%, #2897d5 0%, transparent 30%);
            opacity: 0.08;
            z-index: -3;
            pointer-events: none;
        }

        html {
            height: 100%;
        }

        .container {
            min-height: 100vh;
            position: relative;
            padding-bottom: 100px;
        }

        /* Bandeau d'accueil avec logo MLPB */
        .header-banner {
            background: linear-gradient(135deg, #171718, #2897d5);
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            position: relative;
            z-index: 100;
            flex-wrap: wrap;
            gap: 15px;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 15px;
            flex: 1;
            min-width: 250px;
        }

        .mlpb-logo {
            height: 50px;
            width: auto;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .mlpb-logo:hover {
            transform: scale(1.05);
            filter: brightness(1.1);
        }

        .forum-logo {
            width: 50px;
            height: 50px;
            background: #f39200;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            border: 3px solid white;
            cursor: pointer;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }

        .forum-logo:hover {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 4px 15px rgba(243,146,0,0.4);
        }

        .forum-title {
            font-family: 'Muli', 'Segoe UI', 'Roboto', sans-serif;
            font-weight: 700;
            font-size: clamp(1rem, 3vw, 1.6rem);
            margin: 0;
            cursor: pointer;
            transition: all 0.3s ease;
            letter-spacing: 0.02em;
            text-transform: uppercase;
            color: white;
        }

        .forum-title:hover {
            transform: scale(1.02);
        }

        .download-section {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .download-btn {
            background: rgba(255,255,255,0.2);
            border: 2px solid rgba(255,255,255,0.3);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            backdrop-filter: blur(10px);
            white-space: nowrap;
        }

        .download-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .language-selector {
            position: fixed;
            top: 80px;
            right: 20px;
            z-index: 1000;
            display: flex;
            gap: 10px;
        }

        .lang-btn {
            background: rgba(255, 255, 255, 0.95);
            border: 2px solid #171718;
            border-radius: 25px;
            padding: 8px 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Muli', Arial, sans-serif;
        }

        .lang-btn.active {
            background: #f39200;
            color: white;
            border-color: #f39200;
        }

        .lang-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .page {
            display: none;
            min-height: calc(100vh - 100px);
            padding: 20px;
            position: relative;
        }

        .page.active { display: block; }
        
        .page-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .page-title {
            font-family: 'Muli', Arial, sans-serif;
            font-size: clamp(1.8rem, 5vw, 2.8rem);
            font-weight: 800;
            color: #171718;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 10px;
            position: relative;
            display: inline-block;
        }

        .page-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 0;
            width: 60%;
            height: 6px;
            background: #f39200;
            clip-path: polygon(0 0, calc(100% - 10px) 0, 100% 100%, 10px 100%);
        }

        .page-subtitle {
            font-size: clamp(0.9rem, 2vw, 1.1rem);
            color: #666;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        /* Bloc IdentitÃ© */
        .identity-block {
            background: linear-gradient(135deg, rgba(149,193,31,0.1), rgba(214,11,82,0.1));
            border: 3px solid #95c11f;
            border-radius: 20px;
            padding: 25px;
            margin: 20px auto 30px auto;
            max-width: 800px;
            text-align: center;
        }

        .identity-block h3 {
            color: #95c11f;
            font-weight: 700;
            margin-bottom: 20px;
            font-size: clamp(1rem, 3vw, 1.3rem);
        }

        .identity-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            align-items: center;
        }

        .name-section {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .name-input {
            padding: 12px 18px;
            border: 2px solid #95c11f;
            border-radius: 20px;
            font-family: inherit;
            font-size: 1rem;
            font-weight: 600;
            text-align: center;
            transition: all 0.3s ease;
            background: white;
        }

        .name-input:focus {
            border-color: #d60b52;
            outline: none;
            box-shadow: 0 0 10px rgba(214,11,82,0.2);
            transform: scale(1.02);
        }

        .name-input::placeholder {
            color: #999;
            font-weight: 400;
        }

        .cv-upload-section {
            display: flex;
            justify-content: center;
        }

        .cv-upload-area-main {
            background: white;
            border: 3px dashed #95c11f;
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 200px;
            height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .cv-upload-area-main:hover {
            border-color: #d60b52;
            background: rgba(214,11,82,0.05);
            transform: scale(1.02);
        }

        .cv-upload-area-main.has-cv {
            border-style: solid;
            background: rgba(149,193,31,0.1);
        }

        .cv-upload-content-main {
            text-align: center;
        }

        .cv-upload-icon-main {
            font-size: 2.5rem;
            margin-bottom: 8px;
            color: #95c11f;
        }

        .cv-upload-text-main strong {
            color: #171718;
            font-size: 1rem;
            font-weight: 600;
        }

        .cv-upload-text-main small {
            color: #666;
            font-size: 0.8rem;
        }

        .cv-preview-main {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            padding: 10px;
        }

        .cv-file-info-main {
            display: flex;
            align-items: center;
            gap: 10px;
            text-align: left;
        }

        .cv-file-icon-main {
            font-size: 2rem;
            color: #95c11f;
        }

        .cv-file-name-main {
            font-weight: 600;
            color: #171718;
            font-size: 0.9rem;
            max-width: 120px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .remove-cv-main {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #d60b52;
            color: white;
            border: none;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 0.8rem;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .remove-cv-main:hover {
            background: #9f3d3f;
            transform: scale(1.1);
        }

        /* Page 1 - Plan du Forum */
        .forum-legend {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(255,255,255,0.95);
            border: 3px solid #171718;
            border-radius: 15px;
            max-width: 600px;
            margin: 0 auto 30px auto;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 700;
            font-size: clamp(0.75rem, 2vw, 0.9rem);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .legend-icon {
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 3px solid #171718;
            font-weight: 900;
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        .legend-icon.hq {
            background: #f39200;
            color: white;
            clip-path: polygon(20% 0%, 80% 0%, 100% 20%, 100% 80%, 80% 100%, 20% 100%, 0% 80%, 0% 20%);
        }

        .legend-icon.sector {
            background: #2897d5;
            color: white;
            border-radius: 8px;
        }

        .legend-icon.path {
            background: #95c11f;
            color: white;
            border-radius: 50%;
        }

        .forum-map {
            background: 
                radial-gradient(circle at 20% 30%, rgba(40,151,213,0.08) 0%, transparent 40%),
                radial-gradient(circle at 80% 70%, rgba(149,193,31,0.08) 0%, transparent 40%),
                linear-gradient(45deg, transparent 48%, rgba(243,146,0,0.03) 49%, rgba(243,146,0,0.03) 51%, transparent 52%),
                #ffffff;
            border: 6px solid #171718;
            border-radius: 30px;
            padding: 40px 20px;
            margin: 20px auto;
            max-width: 1200px;
            min-height: 600px;
            box-shadow: 15px 15px 0px #f39200, 30px 30px 0px rgba(0,0,0,0.1);
            position: relative;
            display: grid;
            grid-template-areas: 
                "entrance entrance entrance"
                "path1 hq path2"
                "sectors sectors sectors"
                "path3 rest path4";
            grid-template-columns: 1fr 2fr 1fr;
            grid-template-rows: auto auto 1fr auto;
            gap: 25px;
        }

        .forum-map::before {
            content: 'ðŸŽ¯ PLATEAU DE JEU MISSION EMPLOI ðŸŽ²';
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(45deg, #f39200, #95c11f);
            color: white;
            padding: 12px 30px;
            border-radius: 25px;
            font-weight: 800;
            font-size: clamp(0.8rem, 2vw, 1rem);
            letter-spacing: 0.1em;
            border: 4px solid #171718;
            box-shadow: 6px 6px 0px #171718;
            white-space: nowrap;
        }

        .game-path {
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .path-arrow {
            font-size: clamp(2.5rem, 5vw, 3.5rem);
            color: #f39200;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
            animation: arrowPulse 2s infinite;
            cursor: pointer;
            transition: all 0.3s ease;
            user-select: none;
        }

        .path-arrow:hover {
            transform: scale(1.2);
            color: #2897d5;
        }

        @keyframes arrowPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .game-dice {
            background: linear-gradient(135deg, #2897d5, #95c11f);
            border: 4px solid #171718;
            border-radius: 15px;
            width: clamp(60px, 10vw, 70px);
            height: clamp(60px, 10vw, 70px);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: clamp(2rem, 4vw, 2.5rem);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0 auto;
            box-shadow: 4px 4px 0px #171718;
            user-select: none;
        }

        .game-dice:hover {
            transform: scale(1.1) rotate(15deg);
            box-shadow: 6px 6px 0px #171718;
            background: linear-gradient(135deg, #f39200, #d60b52);
        }

        .forum-entrance {
            grid-area: entrance;
            text-align: center;
        }

        .entrance-sign {
            background: linear-gradient(135deg, #2897d5, #95c11f);
            color: white;
            padding: 25px 15px;
            border: 4px solid #171718;
            clip-path: polygon(10% 0%, 90% 0%, 100% 25%, 100% 100%, 0% 100%, 0% 25%);
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            box-shadow: 6px 6px 0px rgba(0,0,0,0.2);
            user-select: none;
        }

        .entrance-sign:hover {
            transform: scale(1.02) rotate(1deg);
            box-shadow: 8px 8px 0px rgba(0,0,0,0.3);
            background: linear-gradient(135deg, #f39200, #d60b52);
        }

        .player-info {
            margin-top: 15px;
            animation: playerAppear 0.6s ease-out;
        }

        @keyframes playerAppear {
            0% { opacity: 0; transform: translateY(-10px); }
            100% { opacity: 1; transform: translateY(0); }
        }

        .player-badge {
            background: rgba(255,255,255,0.2);
            border: 3px solid rgba(255,255,255,0.4);
            border-radius: 20px;
            padding: 15px 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            backdrop-filter: blur(10px);
            flex-wrap: wrap;
            justify-content: center;
        }

        .player-icon {
            background: rgba(255,255,255,0.3);
            border-radius: 50%;
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            flex-shrink: 0;
        }

        .player-details {
            flex: 1;
            text-align: left;
            min-width: 150px;
        }

        .player-name {
            font-size: clamp(1rem, 2.5vw, 1.2rem);
            font-weight: 800;
            margin-bottom: 3px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .player-status {
            font-size: clamp(0.8rem, 2vw, 0.9rem);
            opacity: 0.9;
            font-weight: 600;
            text-transform: none;
            letter-spacing: 0.02em;
        }

        .entrance-sign h3 {
            margin: 0 0 10px 0;
            font-size: clamp(1.2rem, 3vw, 1.6rem);
        }

        .entrance-sign p {
            margin: 0;
            font-size: clamp(0.9rem, 2vw, 1.1rem);
            opacity: 0.9;
        }

        .headquarters {
            grid-area: hq;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .hq-building {
            background: #f39200;
            color: white;
            border: 5px solid #171718;
            padding: 35px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            position: relative;
            width: 100%;
            max-width: 280px;
            clip-path: polygon(20% 0%, 80% 0%, 100% 20%, 100% 80%, 80% 100%, 20% 100%, 0% 80%, 0% 20%);
            box-shadow: 8px 8px 0px #171718;
            user-select: none;
        }

        .hq-building:hover {
            transform: scale(1.05) rotate(2deg);
            box-shadow: 12px 12px 0px #171718;
            background: linear-gradient(135deg, #f39200, #d60b52);
        }

        .hq-flag {
            font-size: clamp(2.5rem, 5vw, 3.5rem);
            margin-bottom: 15px;
            animation: flagWave 3s infinite;
        }

        @keyframes flagWave {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(5deg); }
            75% { transform: rotate(-5deg); }
        }

        .hq-building h3 {
            margin: 0 0 8px 0;
            font-size: clamp(1rem, 2.5vw, 1.3rem);
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .hq-building h4 {
            margin: 0 0 20px 0;
            font-size: clamp(0.9rem, 2vw, 1.1rem);
            font-weight: 600;
            opacity: 0.9;
        }

        .hq-services {
            display: flex;
            flex-direction: column;
            gap: 8px;
            font-size: clamp(0.8rem, 2vw, 0.9rem);
            font-weight: 600;
        }

        .sectors-circle {
            grid-area: sectors;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            padding: 20px;
        }

        .sector-stand {
            background: #ffffff;
            border: 4px solid #171718;
            padding: 25px 15px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            position: relative;
            min-height: 160px;
            border-radius: 15px;
            box-shadow: 4px 4px 0px rgba(0,0,0,0.1);
            user-select: none;
        }

        .sector-stand:hover {
            transform: translateY(-8px) rotate(2deg);
            box-shadow: 8px 8px 0px rgba(0,0,0,0.2);
        }

        .tech-sector { 
            background: linear-gradient(135deg, rgba(40,151,213,0.1), rgba(40,151,213,0.2));
            border-color: #2897d5;
        }
        .tech-sector:hover { box-shadow: 8px 8px 0px #2897d5; }

        .resto-sector { 
            background: linear-gradient(135deg, rgba(149,193,31,0.1), rgba(149,193,31,0.2));
            border-color: #95c11f;
        }
        .resto-sector:hover { box-shadow: 8px 8px 0px #95c11f; }

        .sante-sector { 
            background: linear-gradient(135deg, rgba(214,11,82,0.1), rgba(214,11,82,0.2));
            border-color: #d60b52;
        }
        .sante-sector:hover { box-shadow: 8px 8px 0px #d60b52; }

        .commerce-sector { 
            background: linear-gradient(135deg, rgba(163,25,91,0.1), rgba(163,25,91,0.2));
            border-color: #a3195b;
        }
        .commerce-sector:hover { box-shadow: 8px 8px 0px #a3195b; }

        .artisan-sector { 
            background: linear-gradient(135deg, rgba(159,61,63,0.1), rgba(159,61,63,0.2));
            border-color: #9f3d3f;
        }
        .artisan-sector:hover { box-shadow: 8px 8px 0px #9f3d3f; }

        .service-sector { 
            background: linear-gradient(135deg, rgba(23,23,24,0.1), rgba(23,23,24,0.2));
            border-color: #171718;
        }
        .service-sector:hover { box-shadow: 8px 8px 0px #171718; }

        .tourisme-sector { 
            background: linear-gradient(135deg, rgba(40,151,213,0.1), rgba(149,193,31,0.1));
            border-color: #2897d5;
        }
        .tourisme-sector:hover { box-shadow: 8px 8px 0px #2897d5; }

        .transport-sector { 
            background: linear-gradient(135deg, rgba(243,146,0,0.1), rgba(243,146,0,0.2));
            border-color: #f39200;
        }
        .transport-sector:hover { box-shadow: 8px 8px 0px #f39200; }

        .custom-sector { 
            background: linear-gradient(135deg, rgba(23,23,24,0.05), rgba(149,193,31,0.1));
            border: 4px dashed #95c11f;
            position: relative;
        }
        .custom-sector:hover { 
            box-shadow: 8px 8px 0px #95c11f; 
            border-style: solid;
            background: linear-gradient(135deg, rgba(149,193,31,0.1), rgba(243,146,0,0.1));
        }

        .custom-sector::after {
            content: "NOUVEAU";
            position: absolute;
            top: -12px;
            right: 15px;
            background: #95c11f;
            color: white;
            font-size: 0.7rem;
            font-weight: 800;
            padding: 4px 10px;
            border-radius: 12px;
            transform: rotate(15deg);
            border: 2px solid white;
            pointer-events: none;
        }

        .sector-icon {
            font-size: clamp(2.5rem, 5vw, 3rem);
            margin-bottom: 15px;
            animation: iconBounce 2s infinite;
        }

        @keyframes iconBounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .sector-info h4 {
            margin: 0 0 10px 0;
            font-size: clamp(0.85rem, 2vw, 1rem);
            font-weight: 900;
            color: #171718;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .company-count {
            font-size: clamp(0.8rem, 2vw, 0.9rem);
            font-weight: 700;
            color: #666;
            margin-bottom: 15px;
        }

        .sector-tags {
            display: flex;
            gap: 6px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .sector-tags .tag {
            background: #171718;
            color: white;
            padding: 4px 10px;
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            border-radius: 12px;
            pointer-events: none;
        }

        .rest-area {
            grid-area: rest;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .rest-zone {
            background: linear-gradient(135deg, rgba(149,193,31,0.2), rgba(243,146,0,0.2));
            border: 4px dashed #95c11f;
            padding: 30px 15px;
            text-align: center;
            border-radius: 20px;
            font-weight: 600;
            transition: all 0.3s ease;
            cursor: pointer;
            user-select:none;
        }

        .rest-zone:hover {
            transform: scale(1.05);
            border-color: #f39200;
        }

        .rest-zone h4 {
            margin: 0 0 12px 0;
            color: #95c11f;
            font-size: clamp(1rem, 2.5vw, 1.2rem);
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .rest-zone p {
            margin: 0;
            color: #666;
            font-size: clamp(0.85rem, 2vw, 1rem);
        }

        /* Page 2 - RÃ¨gles */
        .rules-container {
            background: #ffffff;
            border: 5px solid #171718;
            padding: 40px 20px;
            margin: 20px auto;
            max-width: 1000px;
            box-shadow: 15px 15px 0px #2897d5;
            position: relative;
            border-radius: 25px;
        }

        .rules-container::before {
            content: 'ðŸƒ CARTES DÃ‰FIS MISSION LOCALE ðŸŽ¯';
            position: absolute;
            top: -18px;
            left: 50%;
            transform: translateX(-50%);
            background: #171718;
            color: white;
            padding: 10px 25px;
            border-radius: 20px;
            font-weight: 800;
            font-size: clamp(0.8rem, 2vw, 1rem);
            letter-spacing: 0.1em;
            white-space: nowrap;
            pointer-events: none;
        }

        .challenge-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px;
            margin: 30px 0;
        }

        .challenge-card {
            background: linear-gradient(135deg, #ffffff, #f8f8f8);
            border: 5px solid #171718;
            border-radius: 25px;
            padding: 30px 20px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            position: relative;
            box-shadow: 8px 8px 0px rgba(0,0,0,0.1);
            min-height: 220px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            user-select: none;
        }

        .challenge-card:hover {
            transform: translateY(-10px) rotate(3deg);
            box-shadow: 15px 15px 0px rgba(0,0,0,0.2);
        }

        .challenge-card.completed {
            background: linear-gradient(135deg, #95c11f, #f39200);
            color: white;
            border-color: #95c11f;
            animation: cardComplete 0.8s ease-out;
        }

        @keyframes cardComplete {
            0% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.1) rotate(10deg); }
            100% { transform: scale(1) rotate(0deg); }
        }

        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .card-level {
            background: #171718;
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 900;
            margin-right: 20px;
            font-size: 1.3rem;
            border: 3px solid white;
            flex-shrink: 0;
        }

        .card-title {
            font-weight: 800;
            font-size: clamp(1rem, 2.5vw, 1.2rem);
            color: #171718;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .challenge-card.completed .card-title {
            color: white;
        }

        .card-mission {
            font-size: clamp(0.9rem, 2vw, 1.1rem);
            color: #666;
            margin: 20px 0;
            line-height: 1.5;
            font-weight: 500;
        }

        .challenge-card.completed .card-mission {
            color: rgba(255,255,255,0.9);
        }

        .card-reward {
            background: #f39200;
            color: white;
            padding: 12px 20px;
            border-radius: 20px;
            font-weight: 700;
            text-align: center;
            font-size: clamp(0.85rem, 2vw, 1rem);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-top: auto;
            border: 3px solid white;
        }

        .challenge-card.completed .card-reward {
            background: rgba(255,255,255,0.2);
            border: 3px solid white;
        }

        .card-bonus {
            border: 5px dashed #f39200 !important;
            background: linear-gradient(135deg, rgba(243,146,0,0.1), rgba(149,193,31,0.1)) !important;
        }

        .card-bonus.completed {
            background: linear-gradient(135deg, #f39200, #171718) !important;
            border-style: solid !important;
        }

        .card-bonus::after {
            content: "BONUS";
            position: absolute;
            top: -15px;
            right: 20px;
            background: #f39200;
            color: white;
            font-size: 0.8rem;
            font-weight: 800;
            padding: 6px 15px;
            border-radius: 15px;
            transform: rotate(15deg);
            border: 2px solid white;
            pointer-events: none;
        }

        .card-jackpot {
            border: 5px solid #d60b52 !important;
            background: linear-gradient(135deg, rgba(214,11,82,0.1), rgba(163,25,91,0.1)) !important;
            position: relative;
        }

        .card-jackpot.completed {
            background: linear-gradient(135deg, #d60b52, #a3195b) !important;
        }

        .card-jackpot::after {
            content: "JACKPOT";
            position: absolute;
            top: -15px;
            right: 20px;
            background: #d60b52;
            color: white;
            font-size: 0.8rem;
            font-weight: 800;
            padding: 6px 15px;
            border-radius: 15px;
            transform: rotate(-15deg);
            animation: jackpotGlow 2s infinite;
            border: 2px solid white;
            pointer-events: none;
        }

        @keyframes jackpotGlow {
            0%, 100% { box-shadow: 0 0 8px #d60b52; }
            50% { box-shadow: 0 0 20px #d60b52, 0 0 30px #d60b52; }
        }

        /* Page 3 - Suivi */
        .tracking-table {
            background: #ffffff;
            border: 5px solid #171718;
            padding: 40px 20px;
            margin: 20px auto;
            max-width: 1000px;
            box-shadow: 12px 12px 0px #95c11f;
            overflow-x: auto;
            position: relative;
            border-radius: 20px;
        }

        .tracking-table::after {
            content: '';
            position: absolute;
            top: -10px;
            left: -10px;
            width: 35px;
            height: 35px;
            background: #d60b52;
            transform: rotate(45deg);
            border-radius: 5px;
            pointer-events: none;
        }

        /* Compteur d'entreprises visitÃ©es */
        .companies-counter {
            background: linear-gradient(135deg, #2897d5, #95c11f);
            color: white;
            padding: 25px;
            border-radius: 25px;
            text-align: center;
            margin: 20px auto 30px auto;
            max-width: 600px;
            border: 5px solid #171718;
            box-shadow: 8px 8px 0px #f39200;
        }

        .companies-counter h3 {
            margin: 0 0 15px 0;
            font-size: clamp(1.2rem, 3vw, 1.5rem);
            font-weight: 800;
        }

        .counter-display {
            font-size: clamp(2.5rem, 6vw, 4rem);
            font-weight: 900;
            margin: 15px 0;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
        }

        .company-row {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr 1fr 2fr;
            gap: 15px;
            align-items: center;
            padding: 20px 15px;
            border-bottom: 3px solid #f0f0f0;
            transition: all 0.3s ease;
            border-radius: 10px;
        }

        .company-row:hover {
            background: rgba(243,146,0,0.1);
            transform: scale(1.02);
        }

        .company-input {
            padding: 12px;
            border: 3px solid #ddd;
            border-radius: 15px;
            font-family: inherit;
            transition: border-color 0.3s ease;
            font-weight: 600;
            width: 100%;
        }

        .company-input:focus {
            border-color: #f39200;
            outline: none;
            box-shadow: 0 0 10px rgba(243,146,0,0.3);
        }

        .checkbox-container {
            display: flex;
            justify-content: center;
        }

        .custom-checkbox {
            width: 30px;
            height: 30px;
            border: 4px solid #ddd;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .custom-checkbox.checked {
            background: #95c11f;
            border-color: #95c11f;
            transform: scale(1.1);
        }

        .custom-checkbox.checked::after {
            content: 'âœ“';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-weight: bold;
            font-size: 1.2rem;
        }

        /* Page 4 - Questions */
        .questions-container {
            background: rgba(255,255,255,0.98);
            border-radius: 25px;
            padding: 40px 20px;
            margin: 20px auto;
            max-width: 900px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.2);
            border: 3px solid #171718;
        }

        .question-item {
            display: flex;
            align-items: center;
            background: linear-gradient(90deg, rgba(40,151,213,0.1) 0%, rgba(214,11,82,0.1) 100%);
            border-radius: 20px;
            padding: 25px 15px;
            margin-bottom: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
            flex-wrap: wrap;
            gap: 15px;
            user-select: none;
        }

        .question-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            border-color: #f39200;
        }

        .question-item.selected {
            background: linear-gradient(90deg, #f39200, #95c11f);
            color: white;
            border-color: #171718;
        }

        .question-icon {
            background: #2897d5;
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            border: 3px solid white;
            flex-shrink: 0;
        }

        .question-item.selected .question-icon {
            background: rgba(255,255,255,0.2);
        }

        .question-item > div:not(.question-icon) {
            flex: 1;
            min-width: 200px;
            font-size: clamp(0.9rem, 2vw, 1rem);
        }

        .personal-questions {
            background: linear-gradient(45deg, #d60b52, #a3195b);
            color: white;
            border: none;
            padding: 18px 35px;
            border-radius: 30px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 30px;
            font-size: clamp(1rem, 2.5vw, 1.1rem);
            border: 3px solid white;
            width: 100%;
            max-width: 400px;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }

        .personal-questions:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        /* Page 5 - Validation */
        .validation-container {
            background: rgba(255,255,255,0.98);
            border-radius: 25px;
            padding: 40px 20px;
            margin: 20px auto;
            max-width: 1100px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.2);
            text-align: center;
            border: 3px solid #171718;
        }

        .sticker-collection {
            background: linear-gradient(135deg, #f39200, #95c11f);
            border: 5px solid #171718;
            border-radius: 30px;
            padding: 40px 20px;
            margin: 40px 0;
            position: relative;
            box-shadow: 12px 12px 0px #2897d5;
        }

        .sticker-collection::before {
            content: "ðŸ† COLLECTION BADGES MISSION LOCALE ðŸ†";
            position: absolute;
            top: -18px;
            left: 50%;
            transform: translateX(-50%);
            background: #171718;
            color: white;
            padding: 10px 25px;
            border-radius: 20px;
            font-weight: 800;
            font-size: clamp(0.8rem, 2vw, 1rem);
            letter-spacing: 0.1em;
            white-space: nowrap;
            pointer-events: none;
        }

        .sticker-collection h3 {
            color: white;
            margin: 0 0 30px 0;
            font-size: clamp(1.2rem, 3vw, 1.5rem);
            text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
            font-weight: 800;
        }

        .badges-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 30px;
            margin: 40px 0;
        }

        .badge-sticker {
            background: white;
            border: 5px solid #171718;
            border-radius: 50%;
            width: 140px;
            height: 140px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            position: relative;
            box-shadow: 6px 6px 0px rgba(0,0,0,0.2);
            margin: 0 auto;
            user-select: none;
        }

        .badge-sticker:hover {
            transform: scale(1.15) rotate(10deg);
            box-shadow: 10px 10px 0px rgba(0,0,0,0.3);
        }

        .badge-sticker.unlocked {
            background: linear-gradient(135deg, #f39200, #95c11f);
            color: white;
            animation: badgeUnlock 1s ease-out;
            border-color: #95c11f;
        }

        .badge-sticker.unlocked:hover {
            animation: badgePulse 1s infinite;
        }

        @keyframes badgeUnlock {
            0% { transform: scale(0.3) rotate(0deg); opacity: 0; }
            50% { transform: scale(1.4) rotate(180deg); opacity: 0.8; }
            100% { transform: scale(1) rotate(360deg); opacity: 1; }
        }

        @keyframes badgePulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.08); }
        }

        .badge-sticker::before {
            content: '';
            position: absolute;
            top: -10px;
            right: -10px;
            width: 30px;
            height: 30px;
            background: #d60b52;
            border-radius: 50%;
            display: none;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1rem;
            font-weight: 800;
            border: 3px solid white;
            pointer-events: none;
        }

        .badge-sticker.unlocked::before {
            content: 'âœ“';
            display: flex;
        }

        .badge-icon {
            font-size: clamp(2.5rem, 5vw, 3rem);
            margin-bottom: 10px;
        }

        .badge-name {
            font-weight: 800;
            font-size: clamp(0.7rem, 1.5vw, 0.8rem);
            text-align: center;
            line-height: 1.2;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            padding: 0 5px;
        }

        .ml-badge-1 { border-color: #2897d5; }
        .ml-badge-1.unlocked { background: linear-gradient(135deg, #2897d5, #95c11f); }

        .ml-badge-2 { border-color: #f39200; }
        .ml-badge-2.unlocked { background: linear-gradient(135deg, #f39200, #d60b52); }

        .ml-badge-3 { border-color: #95c11f; }
        .ml-badge-3.unlocked { background: linear-gradient(135deg, #95c11f, #2897d5); }

        .ml-badge-4 { border-color: #d60b52; }
        .ml-badge-4.unlocked { background: linear-gradient(135deg, #d60b52, #f39200); }

        .ml-badge-5 { border-color: #a3195b; }
        .ml-badge-5.unlocked { background: linear-gradient(135deg, #a3195b, #95c11f); }

        .ml-badge-bonus { 
            border-color: #171718;
            border-style: dashed;
            border-width: 4px;
            position: relative;
        }
        .ml-badge-bonus.unlocked { 
            background: linear-gradient(135deg, #171718, #f39200);
            border-style: solid;
        }

        .ml-badge-bonus::after {
            content: "BONUS";
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            background: #f39200;
            color: white;
            font-size: 0.7rem;
            font-weight: 800;
            padding: 4px 12px;
            border-radius: 12px;
            border: 2px solid white;
            pointer-events: none;
        }

        .action-buttons {
            display: flex;
            gap: 25px;
            justify-content: center;
            margin-top: 40px;
            flex-wrap: wrap;
        }

        .action-btn {
            background: linear-gradient(45deg, #2897d5, #d60b52);
            color: white;
            border: none;
            padding: 18px 35px;
            border-radius: 30px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: clamp(1rem, 2.5vw, 1.1rem);
            border: 3px solid white;
        }

        .action-btn:hover {
            transform: scale(1.08);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        .qr-code {
            width: 120px;
            height: 120px;
            background: #171718;
            border-radius: 15px;
            margin: 25px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.9rem;
            font-weight: 600;
            border: 3px solid #f39200;
        }

        .mobility-tracker {
            background: linear-gradient(135deg, rgba(149,193,31,0.1), rgba(95,195,31,0.1));
            border: 4px dashed #95c11f;
            border-radius: 25px;
            padding: 35px 20px;
            margin: 40px 0;
            text-align: center;
        }

        .mobility-tracker h3 {
            color: #95c11f;
            font-weight: 800;
            margin-bottom: 25px;
            font-size: clamp(1.2rem, 3vw, 1.5rem);
        }

        .mobility-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 25px;
            margin-bottom: 25px;
        }

        .mobility-item {
            background: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 6px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            border: 3px solid transparent;
        }

        .mobility-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            border-color: #95c11f;
        }

        .mobility-icon {
            font-size: clamp(2rem, 4vw, 2.5rem);
            margin-bottom: 15px;
        }

        .mobility-counter input[type="number"] {
            width: 100px;
            padding: 10px;
            border: 3px solid #95c11f;
            border-radius: 15px;
            text-align: center;
            font-weight: 700;
            margin-bottom: 8px;
            font-size: 1.1rem;
        }

        .mobility-counter input[type="checkbox"] {
            width: 25px;
            height: 25px;
            transform: scale(1.8);
            cursor: pointer;
        }

        .mobility-counter label {
            display: block;
            font-size: clamp(0.9rem, 2vw, 1rem);
            color: #666;
            font-weight: 700;
        }

        .eco-score {
            background: linear-gradient(45deg, #95c11f, #2897d5);
            color: white;
            padding: 20px;
            border-radius: 30px;
            font-size: clamp(1.2rem, 3vw, 1.4rem);
            font-weight: 800;
            display: inline-block;
            min-width: 250px;
            border: 4px solid white;
            box-shadow: 0 6px 20px rgba(0,0,0,0.2);
        }

        #ecoScore {
            font-size: clamp(1.5rem, 4vw, 1.8rem);
            margin: 0 15px;
        }

        /* Navigation */
        .nav-buttons {
            position: fixed;
            bottom: 25px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 12px;
            z-index: 1000;
            flex-wrap: wrap;
            justify-content: center;
            padding: 10px;
            background: rgba(255,255,255,0.9);
            border-radius: 50px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .nav-btn {
            background: #ffffff;
            border: 4px solid #171718;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            font-weight: 900;
            font-size: 1.3rem;
            clip-path: polygon(20% 0%, 80% 0%, 100% 20%, 100% 80%, 80% 100%, 20% 100%, 0% 80%, 0% 20%);
            box-shadow: 4px 4px 0px rgba(0,0,0,0.2);
            user-select: none;
        }

        .nav-btn:hover {
            background: #f39200;
            color: white;
            transform: rotate(8deg) scale(1.1);
            box-shadow: 6px 6px 0px #171718;
        }

        .nav-btn.active {
            background: #171718;
            color: white;
            box-shadow: 6px 6px 0px #f39200;
        }

        /* Modal fiches entreprises */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
            backdrop-filter: blur(5px);
            overflow-y: auto;
        }

        .modal-content {
            background: white;
            margin: 3% auto;
            padding: 0;
            border-radius: 25px;
            width: 95%;
            max-width: 900px;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: 0 25px 50px rgba(0,0,0,0.4);
            border: 5px solid #171718;
        }

        .modal-header {
            background: linear-gradient(135deg, #f39200, #95c11f);
            color: white;
            padding: 25px 20px;
            border-radius: 20px 20px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .modal-title {
            font-size: clamp(1.3rem, 3vw, 1.8rem);
            font-weight: 800;
            margin: 0;
            flex: 1;
        }

        .close {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            font-size: 2.5rem;
            font-weight: bold;
            cursor: pointer;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            border: 3px solid rgba(255,255,255,0.3);
            flex-shrink: 0;
        }

        .close:hover {
            background: rgba(255,255,255,0.3);
            transform: scale(1.1) rotate(90deg);
        }

        .modal-body {
            padding: 40px 20px;
        }

        .companies-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .company-card {
            background: linear-gradient(135deg, rgba(243,146,0,0.1), rgba(149,193,31,0.1));
            border: 3px solid #f39200;
            border-radius: 20px;
            padding: 25px 15px;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            user-select: none;
        }

        .company-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
            border-color: #95c11f;
        }

        .company-name {
            font-weight: 800;
            font-size: clamp(1.1rem, 2.5vw, 1.4rem);
            color: #171718;
            margin-bottom: 12px;
        }

        .company-info {
            color: #666;
            margin-bottom: 20px;
            line-height: 1.6;
            font-weight: 600;
            font-size: clamp(0.9rem, 2vw, 1rem);
        }

        .company-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }

        .tag {
            background: #2897d5;
            color: white;
            padding: 6px 15px;
            border-radius: 20px;(0.8rem, 2vw, 0.9rem);
            font-weight: 700;
            pointer-events: none;
        }

        .company-actions {
            display: flex;
            gap: 12px;
            justify-content: flex-end;
            flex-wrap: wrap;
        }

        .action-icon {
            background: #95c11f;
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.2rem;
            border: 3px solid white;
            flex-shrink: 0;
        }

        .action-icon:hover {
            background: #f39200;
            transform: scale(1.15);
        }

        .add-company-btn {
            background: linear-gradient(45deg, #d60b52, #a3195b);
            color: white;
            border: none;
            padding: 18px 35px;
            border-radius: 30px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 25px;
            font-size: clamp(1rem, 2.5vw, 1.1rem);
            border: 3px solid white;
            width: 100%;
            max-width: 400px;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }

        .add-company-btn:hover {
            transform: scale(1.08);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }

        .delete-btn {
            position: absolute;
            top: 12px;
            right: 12px;
            background: #d60b52;
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            font-size: 1rem;
            cursor: pointer;
            opacity: 0;
            transition: all 0.3s ease;
            border: 2px solid white;
        }

        .company-card:hover .delete-btn {
            opacity: 1;
        }

        .delete-btn:hover {
            background: #9f3d3f;
            transform: scale(1.15);
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .forum-map {
                grid-template-areas: 
                    "entrance"
                    "hq"
                    "sectors"
                    "rest";
                grid-template-columns: 1fr;
                grid-template-rows: auto auto 1fr auto;
                padding: 30px 15px;
            }

            .game-path {
                display: none;
            }

            .sectors-circle {
                grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
                gap: 15px;
                padding: 15px;
            }
        }

        @media (max-width: 768px) {
            .header-banner {
                flex-direction: column;
                gap: 15px;
                padding: 15px;
            }
            
            .logo-section {
                width: 100%;
                justify-content: center;
            }

            .mlpb-logo {
                height: 40px;
            }

            .download-section {
                width: 100%;
                justify-content: center;
            }
            
            .language-selector {
                top: auto;
                bottom: 100px;
                right: 10px;
                flex-direction: column;
            }
            
            .identity-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .forum-legend {
                flex-direction: column;
                gap: 15px;
                padding: 15px;
            }
            
            .forum-map {
                padding: 20px 10px;
                min-height: auto;
                box-shadow: 8px 8px 0px #f39200, 16px 16px 0px rgba(0,0,0,0.1);
            }

            .forum-map::before {
                font-size: 0.7rem;
                padding: 8px 15px;
            }
            
            .sectors-circle {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                gap: 12px;
                padding: 10px;
            }
            
            .sector-stand {
                min-height: 140px;
                padding: 15px 10px;
            }
            
            .hq-building {
                padding: 25px 15px;
            }
            
            .company-row {
                grid-template-columns: 1fr;
                gap: 15px;
                padding: 15px 10px;
            }

            .company-row > div:first-child {
                font-size: 0.9rem;
                font-weight: 700;
                text-align: left;
            }
            
            .action-buttons {
                flex-direction: column;
                align-items: center;
            }

            .action-btn {
                width: 100%;
                max-width: 300px;
            }
            
            .badges-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 20px;
            }

            .badge-sticker {
                width: 120px;
                height: 120px;
            }
            
            .mobility-grid {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                gap: 15px;
            }
            
            .nav-buttons {
                bottom: 15px;
                gap: 8px;
                padding: 8px;
            }
            
            .nav-btn {
                width: 50px;
                height: 50px;
                font-size: 1.1rem;
            }

            .challenge-cards {
                grid-template-columns: 1fr;
            }

            .companies-grid {
                grid-template-columns: 1fr;
            }

            .modal-content {
                width: 98%;
                margin: 2% auto;
            }
        }

        @media (max-width: 480px) {
            .forum-title {
                font-size: 0.9rem;
            }

            .mlpb-logo {
                height: 35px;
            }

            .page {
                padding: 15px 10px;
            }

            .tracking-table,
            .rules-container,
            .questions-container,
            .validation-container {
                padding: 25px 15px;
            }

            .badges-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }

            .badge-sticker {
                width: 100px;
                height: 100px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Bandeau d'accueil avec logo MLPB -->
        <div class="header-banner">
            <div class="logo-section">
                <img src="https://static.wixstatic.com/media/dd5dab_47743b1c86024865ba19e623a3db327f~mv2.avif/v1/fill/w_224,h_60,al_c,q_80,enc_avif,quality_auto/dd5dab_47743b1c86024865ba19e623a3db327f~mv2.avif" 
                     alt="Mission Locale Pays Basque" 
                     class="mlpb-logo"
                     onclick="window.open('https://www.missionlocalepaysbasque.fr/', '_blank')">
                <div class="forum-logo" onclick="downloadLogo()">ðŸŽ¯</div>
                <h1 class="forum-title" onclick="downloadForumName()" id="forumTitleHeader">Forum Mission Locale Pays Basque</h1>
            </div>
            <div class="download-section">
                <button class="download-btn" onclick="downloadLogo()">ðŸ“¥ Logo</button>
                <button class="download-btn" onclick="downloadForumName()">ðŸ“¥ Nom</button>
            </div>
        </div>

        <!-- SÃ©lecteur de langue -->
        <div class="language-selector">
            <button class="lang-btn active" onclick="setLanguage('fr')">ðŸ‡«ðŸ‡· FR</button>
            <button class="lang-btn" onclick="setLanguage('es')">ðŸ‡ªðŸ‡¸ ES</button>
        </div>

        <!-- Page 1 - Plan du Forum Interactif -->
        <div class="page active" id="page1">
            <!-- Bloc IdentitÃ© -->
            <div class="identity-block">
                <h3 data-fr="ðŸ‘¤ Mon IdentitÃ©" data-es="ðŸ‘¤ Mi Identidad">ðŸ‘¤ Mon IdentitÃ©</h3>
                <div class="identity-grid">
                    <div class="name-section">
                        <input type="text" id="firstName" class="name-input" placeholder="PrÃ©nom" data-fr="PrÃ©nom" data-es="Nombre" oninput="updateIdentity()">
                        <input type="text" id="lastName" class="name-input" placeholder="Nom" data-fr="Nom" data-es="Apellido" oninput="updateIdentity()">
                    </div>
                    
                    <div class="cv-upload-section">
                        <div class="cv-upload-area-main" id="cvUploadAreaMain" onclick="triggerMainCVUpload()">
                            <div class="cv-upload-content-main" id="cvUploadContentMain">
                                <div class="cv-upload-icon-main">ðŸ“„</div>
                                <div class="cv-upload-text-main">
                                    <strong data-fr="Mon CV" data-es="Mi CV">Mon CV</strong>
                                    <br>
                                    <small data-fr="PDF, JPG, DOC, DOCX" data-es="PDF, JPG, DOC, DOCX">PDF, JPG, DOC, DOCX</small>
                                </div>
                            </div>
                            <div class="cv-preview-main" id="cvPreviewMain" style="display: none;">
                                <div class="cv-file-info-main">
                                    <div class="cv-file-icon-main">ðŸ“„</div>
                                    <div class="cv-file-name-main" id="cvFileNameMain"></div>
                                </div>
                                <button class="remove-cv-main" onclick="removeMainCV(event)" title="Supprimer">Ã—</button>
                            </div>
                        </div>
                        <input type="file" id="cvFileInputMain" accept=".pdf,.jpg,.jpeg,.doc,.docx" style="display: none;" onchange="handleMainCVUpload(event)">
                    </div>
                </div>
            </div>

            <div class="page-header">
                <h1 class="page-title" id="dynamicTitle" data-fr="Plan du forum" data-es="Plano del foro">Plan du forum</h1>
                <p class="page-subtitle" data-fr="Clique sur chaque secteur pour dÃ©couvrir les entreprises" data-es="Haz clic en cada sector para descubrir las empresas">Clique sur chaque secteur pour dÃ©couvrir les entreprises</p>
            </div>
            
            <!-- LÃ©gende du plan -->
            <div class="forum-legend">
                <div class="legend-item">
                    <div class="legend-icon hq">ðŸ </div>
                    <span data-fr="QG Mission Locale" data-es="QG MisiÃ³n Local">QG Mission Locale</span>
                </div>
                <div class="legend-item">
                    <div class="legend-icon sector">ðŸ¢</div>
                    <span data-fr="Secteurs" data-es="Sectores">Secteurs</span>
                </div>
                <div class="legend-item">
                    <div class="legend-icon path">â†’</div>
                    <span data-fr="Parcours" data-es="Recorrido">Parcours</span>
                </div>
            </div>
            
            <div class="forum-map">
                <!-- EntrÃ©e du Forum -->
                <div class="forum-entrance">
                    <div class="entrance-sign" onclick="registerPlayer()">
                        <h3 data-fr="ðŸšª ENTRÃ‰E FORUM" data-es="ðŸšª ENTRADA FORO">ðŸšª ENTRÃ‰E FORUM</h3>
                        <p data-fr="Clique pour t'identifier" data-es="Haz clic para identificarte">Clique pour t'identifier</p>
                        <div id="playerInfo" class="player-info" style="display: none;">
                            <div class="player-badge">
                                <span class="player-icon">ðŸ‘¤</span>
                                <div class="player-details">
                                    <div class="player-name" id="playerName"></div>
                                    <div class="player-status" data-fr="Mission en cours..." data-es="MisiÃ³n en curso...">Mission en cours...</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Mission Locale - Quartier GÃ©nÃ©ral -->
                <div class="headquarters">
                   <div class="headquarters">
    <div class="hq-building" onclick="alert(currentLanguage === 'fr' ? 'Quartier GÃ©nÃ©ral de la Mission Locale - Point de dÃ©part et validation' : 'Cuartel General de la MisiÃ³n Local - Punto de partida y validaciÃ³n')">
                        <div class="hq-flag">ðŸ </div>
                        <h3 data-fr="QUARTIER GÃ‰NÃ‰RAL" data-es="CUARTEL GENERAL">QUARTIER GÃ‰NÃ‰RAL</h3>
                        <h4 data-fr="Mission Locale" data-es="MisiÃ³n Local">Mission Locale</h4>
                        <div class="hq-services">
                            <span data-fr="â€¢ DÃ©part Mission" data-es="â€¢ Inicio MisiÃ³n">â€¢ DÃ©part Mission</span>
                            <span data-fr="â€¢ Validation Badges" data-es="â€¢ ValidaciÃ³n Insignias">â€¢ Validation Badges</span>
                            <span data-fr="â€¢ Bilan Final" data-es="â€¢ Balance Final">â€¢ Bilan Final</span>
                        </div>
                    </div>
                </div>

                <!-- Chemin de jeu avec flÃ¨ches -->
                <div class="game-path" style="grid-area: path1;">
                    <div class="path-arrow" onclick="showPathInfo()">â†—ï¸</div>
                </div>
                
                <div class="game-path" style="grid-area: path2;">
                    <div class="path-arrow" onclick="showPathInfo()">â†–ï¸</div>
                </div>
                
                <div class="game-path" style="grid-area: path3;">
                    <div class="game-dice" onclick="rollDice()">ðŸŽ²</div>
                </div>
                
                <div class="game-path" style="grid-area: path4;">
                    <div class="path-arrow" onclick="showPathInfo()">â†—ï¸</div>
                </div>

                <!-- Secteurs d'activitÃ© -->
                <div class="sectors-circle">
                    <!-- Tech & Digital -->
                    <div class="sector-stand tech-sector" onclick="showStandInfo('tech')">
                        <div class="sector-icon">ðŸ’»</div>
                        <div class="sector-info">
                            <h4 data-fr="TECH & DIGITAL" data-es="TECH & DIGITAL">TECH & DIGITAL</h4>
                            <div class="company-count" data-fr="5 entreprises" data-es="5 empresas">5 entreprises</div>
                            <div class="sector-tags">
                                <span class="tag">Dev</span>
                                <span class="tag">Web</span>
                                <span class="tag">IA</span>
                            </div>
                        </div>
                    </div>

                    <!-- Restauration -->
                    <div class="sector-stand resto-sector" onclick="showStandInfo('resto')">
                        <div class="sector-icon">ðŸ½ï¸</div>
                        <div class="sector-info">
                            <h4 data-fr="RESTAURATION" data-es="RESTAURACIÃ“N">RESTAURATION</h4>
                            <div class="company-count" data-fr="8 entreprises" data-es="8 empresas">8 entreprises</div>
                            <div class="sector-tags">
                                <span class="tag">Chef</span>
                                <span class="tag">Service</span>
                                <span class="tag">Gestion</span>
                            </div>
                        </div>
                    </div>

                    <!-- SantÃ© & Social -->
                    <div class="sector-stand sante-sector" onclick="showStandInfo('sante')">
                        <div class="sector-icon">ðŸ¥</div>
                        <div class="sector-info">
                            <h4 data-fr="SANTÃ‰ & SOCIAL" data-es="SALUD & SOCIAL">SANTÃ‰ & SOCIAL</h4>
                            <div class="company-count" data-fr="6 entreprises" data-es="6 empresas">6 entreprises</div>
                            <div class="sector-tags">
                                <span class="tag">Soin</span>
                                <span class="tag">Aide</span>
                                <span class="tag">EHPAD</span>
                            </div>
                        </div>
                    </div>

                    <!-- Commerce -->
                    <div class="sector-stand commerce-sector" onclick="showStandInfo('commerce')">
                        <div class="sector-icon">ðŸ›ï¸</div>
                        <div class="sector-info">
                            <h4 data-fr="COMMERCE" data-es="COMERCIO">COMMERCE</h4>
                            <div class="company-count" data-fr="12 entreprises" data-es="12 empresas">12 entreprises</div>
                            <div class="sector-tags">
                                <span class="tag">Vente</span>
                                <span class="tag">Accueil</span>
                                <span class="tag">Mode</span>
                            </div>
                        </div>
                    </div>

                    <!-- Artisanat & BTP -->
                    <div class="sector-stand artisan-sector" onclick="showStandInfo('artisan')">
                        <div class="sector-icon">ðŸ”¨</div>
                        <div class="sector-info">
                            <h4 data-fr="ARTISANAT & BTP" data-es="ARTESANÃA & BTP">ARTISANAT & BTP</h4>
                            <div class="company-count" data-fr="7 entreprises" data-es="7 empresas">7 entreprises</div>
                            <div class="sector-tags">
                                <span class="tag">Bois</span>
                                <span class="tag">MÃ©tal</span>
                                <span class="tag">BÃ¢ti</span>
                            </div>
                        </div>
                    </div>

                    <!-- Services -->
                    <div class="sector-stand service-sector" onclick="showStandInfo('service')">
                        <div class="sector-icon">ðŸ¢</div>
                        <div class="sector-info">
                            <h4 data-fr="SERVICES" data-es="SERVICIOS">SERVICES</h4>
                            <div class="company-count" data-fr="9 entreprises" data-es="9 empresas">9 entreprises</div>
                            <div class="sector-tags">
                                <span class="tag">Admin</span>
                                <span class="tag">Banque</span>
                                <span class="tag">Conseil</span>
                            </div>
                        </div>
                    </div>

                    <!-- Tourisme & HÃ´tellerie -->
                    <div class="sector-stand tourisme-sector" onclick="showStandInfo('tourisme')">
                        <div class="sector-icon">ðŸ¨</div>
                        <div class="sector-info">
                            <h4 data-fr="TOURISME & HÃ”TELLERIE" data-es="TURISMO & HOSTELERÃA">TOURISME & HÃ”TELLERIE</h4>
                            <div class="company-count" data-fr="6 entreprises" data-es="6 empresas">6 entreprises</div>
                            <div class="sector-tags">
                                <span class="tag">HÃ´tel</span>
                                <span class="tag">Guide</span>
                                <span class="tag">Event</span>
                            </div>
                        </div>
                    </div>

                    <!-- Transport & Logistique -->
                    <div class="sector-stand transport-sector" onclick="showStandInfo('transport')">
                        <div class="sector-icon">ðŸš›</div>
                        <div class="sector-info">
                            <h4 data-fr="TRANSPORT & LOGISTIQUE" data-es="TRANSPORTE & LOGÃSTICA">TRANSPORT & LOGISTIQUE</h4>
                            <div class="company-count" data-fr="4 entreprises" data-es="4 empresas">4 entreprises</div>
                            <div class="sector-tags">
                                <span class="tag">Conduite</span>
                                <span class="tag">Stock</span>
                                <span class="tag">Livraison</span>
                            </div>
                        </div>
                    </div>

                    <!-- Secteur PersonnalisÃ© -->
                    <div class="sector-stand custom-sector" onclick="showCustomSectorModal()">
                        <div class="sector-icon">âž•</div>
                        <div class="sector-info">
                            <h4 data-fr="AJOUTER SECTEUR" data-es="AGREGAR SECTOR">AJOUTER SECTEUR</h4>
                            <div class="company-count" data-fr="CrÃ©er nouveau secteur" data-es="Crear nuevo sector">CrÃ©er nouveau secteur</div>
                            <div class="sector-tags">
                                <span class="tag">Nouveau</span>
                                <span class="tag">Perso</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Zone de dÃ©tente -->
                <div class="rest-area">
                    <div class="rest-zone" onclick="showRestInfo()">
                        <h4 data-fr="â˜• ZONE DÃ‰TENTE" data-es="â˜• ZONA DESCANSO">â˜• ZONE DÃ‰TENTE</h4>
                        <p data-fr="Pause cafÃ© â€¢ Networking" data-es="Pausa cafÃ© â€¢ Networking">Pause cafÃ© â€¢ Networking</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Page 2 - RÃ¨gles du jeu -->
        <div class="page" id="page2">
            <div class="page-header">
                <h1 class="page-title" data-fr="Comment rÃ©ussir ta mission ?" data-es="Â¿CÃ³mo completar tu misiÃ³n?">Comment rÃ©ussir ta mission ?</h1>
                <p class="page-subtitle" data-fr="5 niveaux de dÃ©fis pour devenir un pro !" data-es="Â¡5 niveles de desafÃ­os para convertirte en un pro!">5 niveaux de dÃ©fis pour devenir un pro !</p>
            </div>
            
            <div class="rules-container">
                <div class="challenge-cards">
                    <div class="challenge-card" onclick="completeChallenge(this, 1)">
                        <div class="card-header">
                            <div class="card-level">1</div>
                            <div class="card-title" data-fr="Premier Contact" data-es="Primer Contacto">Premier Contact</div>
                        </div>
                        <div class="card-mission" data-fr="Dire bonjour et se prÃ©senter Ã  un employeur. Donner son prÃ©nom, son Ã¢ge et ce qu'on recherche." data-es="Decir hola y presentarse a un empleador. Dar su nombre, edad y lo que busca.">Dire bonjour et se prÃ©senter Ã  un employeur. Donner son prÃ©nom, son Ã¢ge et ce qu'on recherche.</div>
                        <div class="card-reward">ðŸŽ¯ <span data-fr="Badge Premier Contact" data-es="Insignia Primer Contacto">Badge Premier Contact</span> <strong>+100 pts</strong></div>
                    </div>
                    
                    <div class="challenge-card" onclick="completeChallenge(this, 2)">
                        <div class="card-header">
                            <div class="card-level">2</div>
                            <div class="card-title" data-fr="Communicateur" data-es="Comunicador">Communicateur</div>
                        </div>
                        <div class="card-mission" data-fr="Poser une question sur le mÃ©tier, les missions ou les qualitÃ©s recherchÃ©es. Montrer son intÃ©rÃªt !" data-es="Hacer una pregunta sobre el oficio, las misiones o las cualidades buscadas. Â¡Mostrar interÃ©s!">Poser une question sur le mÃ©tier, les missions ou les qualitÃ©s recherchÃ©es. Montrer son intÃ©rÃªt !</div>
                        <div class="card-reward">ðŸ—£ï¸ <span data-fr="Badge Communicateur" data-es="Insignia Comunicador">Badge Communicateur</span> <strong>+150 pts</strong></div>
                    </div>
                    
                    <div class="challenge-card" onclick="completeChallenge(this, 3)">
                        <div class="card-header">
                            <div class="card-level">3</div>
                            <div class="card-title" data-fr="Candidat Pro" data-es="Candidato Pro">Candidat Pro</div>
                        </div>
                        <div class="card-mission" data-fr="DÃ©poser son CV ou laisser ses coordonnÃ©es. Faire bonne impression avec un document soignÃ©." data-es="Entregar su CV o dejar sus datos. Causar buena impresiÃ³n con un documento cuidado.">DÃ©poser son CV ou laisser ses coordonnÃ©es. Faire bonne impression avec un document soignÃ©.</div>
                        <div class="card-reward">ðŸ“‹ <span data-fr="Badge Candidat Pro" data-es="Insignia Candidato Pro">Badge Candidat Pro</span> <strong>+200 pts</strong></div>
                    </div>
                    
                    <div class="challenge-card card-bonus" onclick="completeChallenge(this, 4)">
                        <div class="card-header">
                            <div class="card-level">4</div>
                            <div class="card-title" data-fr="Networker" data-es="Networker">Networker</div>
                        </div>
                        <div class="card-mission" data-fr="Obtenir une promesse de stage, pÃ©riode d'immersion ou contact privilÃ©giÃ©. CrÃ©er du lien !" data-es="Obtener una promesa de prÃ¡cticas, perÃ­odo de inmersiÃ³n o contacto privilegiado. Â¡Crear vÃ­nculos!">Obtenir une promesse de stage, pÃ©riode d'immersion ou contact privilÃ©giÃ©. CrÃ©er du lien !</div>
                        <div class="card-reward">ðŸ¤ <span data-fr="Badge Networker" data-es="Insignia Networker">Badge Networker</span> <strong>+300 pts</strong></div>
                    </div>
                    
                    <div class="challenge-card card-jackpot" onclick="completeChallenge(this, 5)">
                        <div class="card-header">
                            <div class="card-level">5</div>
                            <div class="card-title" data-fr="Job Hunter" data-es="Job Hunter">Job Hunter</div>
                        </div>
                        <div class="card-mission" data-fr="ÃŠtre rappelÃ© pour un entretien d'embauche ou obtenir une proposition concrÃ¨te. Le Graal !" data-es="Ser llamado para una entrevista de trabajo u obtener una propuesta concreta. Â¡El Grial!">ÃŠtre rappelÃ© pour un entretien d'embauche ou obtenir une proposition concrÃ¨te. Le Graal !</div>
                        <div class="card-reward">ðŸ† <span data-fr="Badge Job Hunter" data-es="Insignia Job Hunter">Badge Job Hunter</span> <strong>+500 pts</strong></div>
                    </div>
                    
                    <div class="challenge-card card-bonus" onclick="completeChallenge(this, 6)">
                        <div class="card-header">
                            <div class="card-level">ðŸŒ±</div>
                            <div class="card-title" data-fr="Ã‰co-Warrior" data-es="Eco-Warrior">Ã‰co-Warrior</div>
                        </div>
                        <div class="card-mission" data-fr="Venir au forum en transport Ã©co-responsable : vÃ©lo, marche, covoiturage ou transport public." data-es="Venir al foro en transporte eco-responsable: bicicleta, caminata, carpooling o transporte pÃºblico.">Venir au forum en transport Ã©co-responsable : vÃ©lo, marche, covoiturage ou transport public.</div>
                        <div class="card-reward">ðŸŒ± <span data-fr="Badge Ã‰co-Warrior" data-es="Insignia Eco-Warrior">Badge Ã‰co-Warrior</span> <strong>+250 pts</strong></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Page 3 - Suivi de parcours -->
        <div class="page" id="page3">
            <div class="page-header">
                <h1 class="page-title" data-fr="Suivi de ton parcours" data-es="Seguimiento de tu recorrido">Suivi de ton parcours</h1>
                <p class="page-subtitle" data-fr="Note tes interactions avec chaque entreprise" dat
            font-size: clamp (0.8rem, 2vw, 0.9rem);
            font-weight: 700;
            pointer-events: none;
        }

        .company-actions {
            display: flex;
            gap: 12px;
            justify-content: flex-end;
            flex-wrap: wrap;
        }

        .action-icon {
            background: #95c11f;
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.2rem;
            border: 3px solid white;
            flex-shrink: 0;
        }

        .action-icon:hover {
            background: #f39200;
            transform: scale(1.15);
        }

        .add-company-btn {
            background: linear-gradient(45deg, #d60b52, #a3195b);
            color: white;
            border: none;
            padding: 18px 35px;
            border-radius: 30px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 25px;
            font-size: clamp(1rem, 2.5vw, 1.1rem);
            border: 3px solid white;
            width: 100%;
            max-width: 400px;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }

        .add-company-btn:hover {
            transform: scale(1.08);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }

        .delete-btn {
            position: absolute;
            top: 12px;
            right: 12px;
            background: #d60b52;
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            font-size: 1rem;
            cursor: pointer;
            opacity: 0;
            transition: all 0.3s ease;
            border: 2px solid white;
        }

        .company-card:hover .delete-btn {
            opacity: 1;
        }

        .delete-btn:hover {
            background: #9f3d3f;
            transform: scale(1.15);
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .forum-map {
                grid-template-areas: 
                    "entrance"
                    "hq"
                    "sectors"
                    "rest";
                grid-template-columns: 1fr;
                grid-template-rows: auto auto 1fr auto;
                padding: 30px 15px;
            }

            .game-path {
                display: none;
            }

            .sectors-circle {
                grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
                gap: 15px;
                padding: 15px;
            }
        }

        @media (max-width: 768px) {
            .header-banner {
                flex-direction: column;
                gap: 15px;
                padding: 15px;
            }
            
            .logo-section {
                width: 100%;
                justify-content: center;
            }

            .mlpb-logo {
                height: 40px;
            }

            .download-section {
                width: 100%;
                justify-content: center;
            }
            
            .language-selector {
                top: auto;
                bottom: 100px;
                right: 10px;
                flex-direction: column;
            }
            
            .identity-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .forum-legend {
                flex-direction: column;
                gap: 15px;
                padding: 15px;
            }
            
            .forum-map {
                padding: 20px 10px;
                min-height: auto;
                box-shadow: 8px 8px 0px #f39200, 16px 16px 0px rgba(0,0,0,0.1);
            }

            .forum-map::before {
                font-size: 0.7rem;
                padding: 8px 15px;
            }
            
            .sectors-circle {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                gap: 12px;
                padding: 10px;
            }
            
            .sector-stand {
                min-height: 140px;
                padding: 15px 10px;
            }
            
            .hq-building {
                padding: 25px 15px;
            }
            
            .company-row {
                grid-template-columns: 1fr;
                gap: 15px;
                padding: 15px 10px;
            }

            .company-row > div:first-child {
                font-size: 0.9rem;
                font-weight: 700;
                text-align: left;
            }
            
            .action-buttons {
                flex-direction: column;
                align-items: center;
            }

            .action-btn {
                width: 100%;
                max-width: 300px;
            }
            
            .badges-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 20px;
            }

            .badge-sticker {
                width: 120px;
                height: 120px;
            }
            
            .mobility-grid {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                gap: 15px;
            }
            
            .nav-buttons {
                bottom: 15px;
                gap: 8px;
                padding: 8px;
            }
            
            .nav-btn {
                width: 50px;
                height: 50px;
                font-size: 1.1rem;
            }

            .challenge-cards {
                grid-template-columns: 1fr;
            }

            .companies-grid {
                grid-template-columns: 1fr;
            }

            .modal-content {
                width: 98%;
                margin: 2% auto;
            }
        }

        @media (max-width: 480px) {
            .forum-title {
                font-size: 0.9rem;
            }

            .mlpb-logo {
                height: 35px;
            }

            .page {
                padding: 15px 10px;
            }

            .tracking-table,
            .rules-container,
            .questions-container,
            .validation-container {
                padding: 25px 15px;
            }

            .badges-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }

            .badge-sticker {
                width: 100px;
                height: 100px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Bandeau d'accueil avec logo MLPB -->
        <div class="header-banner">
            <div class="logo-section">
                <img src="https://static.wixstatic.com/media/dd5dab_47743b1c86024865ba19e623a3db327f~mv2.avif/v1/fill/w_224,h_60,al_c,q_80,enc_avif,quality_auto/dd5dab_47743b1c86024865ba19e623a3db327f~mv2.avif" 
                     alt="Mission Locale Pays Basque" 
                     class="mlpb-logo"
                     onclick="window.open('https://www.missionlocalepaysbasque.fr/', '_blank')">
                <div class="forum-logo" onclick="downloadLogo()">ðŸŽ¯</div>
                <h1 class="forum-title" onclick="downloadForumName()" id="forumTitleHeader">Forum Mission Locale Pays Basque</h1>
            </div>
            <div class="download-section">
                <button class="download-btn" onclick="downloadLogo()">ðŸ“¥ Logo</button>
                <button class="download-btn" onclick="downloadForumName()">ðŸ“¥ Nom</button>
            </div>
        </div>

        <!-- SÃ©lecteur de langue -->
        <div class="language-selector">
            <button class="lang-btn active" onclick="setLanguage('fr')">ðŸ‡«ðŸ‡· FR</button>
            <button class="lang-btn" onclick="setLanguage('es')">ðŸ‡ªðŸ‡¸ ES</button>
        </div>

        <!-- Page 1 - Plan du Forum Interactif -->
        <div class="page active" id="page1">
            <!-- Bloc IdentitÃ© -->
            <div class="identity-block">
                <h3 data-fr="ðŸ‘¤ Mon IdentitÃ©" data-es="ðŸ‘¤ Mi Identidad">ðŸ‘¤ Mon IdentitÃ©</h3>
                <div class="identity-grid">
                    <div class="name-section">
                        <input type="text" id="firstName" class="name-input" placeholder="PrÃ©nom" data-fr="PrÃ©nom" data-es="Nombre" oninput="updateIdentity()">
                        <input type="text" id="lastName" class="name-input" placeholder="Nom" data-fr="Nom" data-es="Apellido" oninput="updateIdentity()">
                    </div>
                    
                    <div class="cv-upload-section">
                        <div class="cv-upload-area-main" id="cvUploadAreaMain" onclick="triggerMainCVUpload()">
                            <div class="cv-upload-content-main" id="cvUploadContentMain">
                                <div class="cv-upload-icon-main">ðŸ“„</div>
                                <div class="cv-upload-text-main">
                                    <strong data-fr="Mon CV" data-es="Mi CV">Mon CV</strong>
                                    <br>
                                    <small data-fr="PDF, JPG, DOC, DOCX" data-es="PDF, JPG, DOC, DOCX">PDF, JPG, DOC, DOCX</small>
                                </div>
                            </div>
                            <div class="cv-preview-main" id="cvPreviewMain" style="display: none;">
                                <div class="cv-file-info-main">
                                    <div class="cv-file-icon-main">ðŸ“„</div>
                                    <div class="cv-file-name-main" id="cvFileNameMain"></div>
                                </div>
                                <button class="remove-cv-main" onclick="removeMainCV(event)" title="Supprimer">Ã—</button>
                            </div>
                        </div>
                        <input type="file" id="cvFileInputMain" accept=".pdf,.jpg,.jpeg,.doc,.docx" style="display: none;" onchange="handleMainCVUpload(event)">
                    </div>
                </div>
            </div>

            <div class="page-header">
                <h1 class="page-title" id="dynamicTitle" data-fr="Plan du forum" data-es="Plano del foro">Plan du forum</h1>
                <p class="page-subtitle" data-fr="Clique sur chaque secteur pour dÃ©couvrir les entreprises" data-es="Haz clic en cada sector para descubrir las empresas">Clique sur chaque secteur pour dÃ©couvrir les entreprises</p>
            </div>
            
            <!-- LÃ©gende du plan -->
            <div class="forum-legend">
                <div class="legend-item">
                    <div class="legend-icon hq">ðŸ </div>
                    <span data-fr="QG Mission Locale" data-es="QG MisiÃ³n Local">QG Mission Locale</span>
                </div>
                <div class="legend-item">
                    <div class="legend-icon sector">ðŸ¢</div>
                    <span data-fr="Secteurs" data-es="Sectores">Secteurs</span>
                </div>
                <div class="legend-item">
                    <div class="legend-icon path">â†’</div>
                    <span data-fr="Parcours" data-es="Recorrido">Parcours</span>
                </div>
            </div>
            
            <div class="forum-map">
                <!-- EntrÃ©e du Forum -->
                <div class="forum-entrance">
                    <div class="entrance-sign" onclick="registerPlayer()">
                        <h3 data-fr="ðŸšª ENTRÃ‰E FORUM" data-es="ðŸšª ENTRADA FORO">ðŸšª ENTRÃ‰E FORUM</h3>
                        <p data-fr="Clique pour t'identifier" data-es="Haz clic para identificarte">Clique pour t'identifier</p>
                        <div id="playerInfo" class="player-info" style="display: none;">
                            <div class="player-badge">
                                <span class="player-icon">ðŸ‘¤</span>
                                <div class="player-details">
                                    <div class="player-name" id="playerName"></div>
                                    <div class="player-status" data-fr="Mission en cours..." data-es="MisiÃ³n en curso...">Mission en cours...</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Mission Locale - Quartier GÃ©nÃ©ral -->
                <div class="headquarters">
                    <div class="hq-building" onclick="showStandInfo('mission')">
                        <div class="hq-flag">ðŸ </div>
                        <h3 data-fr="QUARTIER GÃ‰NÃ‰RAL" data-es="CUARTEL GENERAL">QUARTIER GÃ‰NÃ‰RAL</h3>
                        <h4 data-fr="Mission Locale" data-es="MisiÃ³n Local">Mission Locale</h4>
                        <div class="hq-services">
                            <span data-fr="â€¢ DÃ©part Mission" data-es="â€¢ Inicio MisiÃ³n">â€¢ DÃ©part Mission</span>
                            <span data-fr="â€¢ Validation Badges" data-es="â€¢ ValidaciÃ³n Insignias">â€¢ Validation Badges</span>
                            <span data-fr="â€¢ Bilan Final" data-es="â€¢ Balance Final">â€¢ Bilan Final</span>
                        </div>
                    </div>
                </div>

                <!-- Chemin de jeu avec flÃ¨ches -->
                <div class="game-path" style="grid-area: path1;">
                    <div class="path-arrow" onclick="showPathInfo()">â†—ï¸</div>
                </div>
                
                <div class="game-path" style="grid-area: path2;">
                    <div class="path-arrow" onclick="showPathInfo()">â†–ï¸</div>
                </div>
                
                <div class="game-path" style="grid-area: path3;">
                    <div class="game-dice" onclick="rollDice()">ðŸŽ²</div>
                </div>
                
                <div class="game-path" style="grid-area: path4;">
                    <div class="path-arrow" onclick="showPathInfo()">â†—ï¸</div>
                </div>

                <!-- Secteurs d'activitÃ© -->
                <div class="sectors-circle">
                    <!-- Tech & Digital -->
                    <div class="sector-stand tech-sector" onclick="showStandInfo('tech')">
                        <div class="sector-icon">ðŸ’»</div>
                        <div class="sector-info">
                            <h4 data-fr="TECH & DIGITAL" data-es="TECH & DIGITAL">TECH & DIGITAL</h4>
                            <div class="company-count" data-fr="5 entreprises" data-es="5 empresas">5 entreprises</div>
                            <div class="sector-tags">
                                <span class="tag">Dev</span>
                                <span class="tag">Web</span>
                                <span class="tag">IA</span>
                            </div>
                        </div>
                    </div>

                    <!-- Restauration -->
                    <div class="sector-stand resto-sector" onclick="showStandInfo('resto')">
                        <div class="sector-icon">ðŸ½ï¸</div>
                        <div class="sector-info">
                            <h4 data-fr="RESTAURATION" data-es="RESTAURACIÃ“N">RESTAURATION</h4>
                            <div class="company-count" data-fr="8 entreprises" data-es="8 empresas">8 entreprises</div>
                            <div class="sector-tags">
                                <span class="tag">Chef</span>
                                <span class="tag">Service</span>
                                <span class="tag">Gestion</span>
                            </div>
                        </div>
                    </div>

                    <!-- SantÃ© & Social -->
                    <div class="sector-stand sante-sector" onclick="showStandInfo('sante')">
                        <div class="sector-icon">ðŸ¥</div>
                        <div class="sector-info">
                            <h4 data-fr="SANTÃ‰ & SOCIAL" data-es="SALUD & SOCIAL">SANTÃ‰ & SOCIAL</h4>
                            <div class="company-count" data-fr="6 entreprises" data-es="6 empresas">6 entreprises</div>
                            <div class="sector-tags">
                                <span class="tag">Soin</span>
                                <span class="tag">Aide</span>
                                <span class="tag">EHPAD</span>
                            </div>
                        </div>
                    </div>

                    <!-- Commerce -->
                    <div class="sector-stand commerce-sector" onclick="showStandInfo('commerce')">
                        <div class="sector-icon">ðŸ›ï¸</div>
                        <div class="sector-info">
                            <h4 data-fr="COMMERCE" data-es="COMERCIO">COMMERCE</h4>
                            <div class="company-count" data-fr="12 entreprises" data-es="12 empresas">12 entreprises</div>
                            <div class="sector-tags">
                                <span class="tag">Vente</span>
                                <span class="tag">Accueil</span>
                                <span class="tag">Mode</span>
                            </div>
                        </div>
                    </div>

                    <!-- Artisanat & BTP -->
                    <div class="sector-stand artisan-sector" onclick="showStandInfo('artisan')">
                        <div class="sector-icon">ðŸ”¨</div>
                        <div class="sector-info">
                            <h4 data-fr="ARTISANAT & BTP" data-es="ARTESANÃA & BTP">ARTISANAT & BTP</h4>
                            <div class="company-count" data-fr="7 entreprises" data-es="7 empresas">7 entreprises</div>
                            <div class="sector-tags">
                                <span class="tag">Bois</span>
                                <span class="tag">MÃ©tal</span>
                                <span class="tag">BÃ¢ti</span>
                            </div>
                        </div>
                    </div>

                    <!-- Services -->
                    <div class="sector-stand service-sector" onclick="showStandInfo('service')">
                        <div class="sector-icon">ðŸ¢</div>
                        <div class="sector-info">
                            <h4 data-fr="SERVICES" data-es="SERVICIOS">SERVICES</h4>
                            <div class="company-count" data-fr="9 entreprises" data-es="9 empresas">9 entreprises</div>
                            <div class="sector-tags">
                                <span class="tag">Admin</span>
                                <span class="tag">Banque</span>
                                <span class="tag">Conseil</span>
                            </div>
                        </div>
                    </div>

                    <!-- Tourisme & HÃ´tellerie -->
                    <div class="sector-stand tourisme-sector" onclick="showStandInfo('tourisme')">
                        <div class="sector-icon">ðŸ¨</div>
                        <div class="sector-info">
                            <h4 data-fr="TOURISME & HÃ”TELLERIE" data-es="TURISMO & HOSTELERÃA">TOURISME & HÃ”TELLERIE</h4>
                            <div class="company-count" data-fr="6 entreprises" data-es="6 empresas">6 entreprises</div>
                            <div class="sector-tags">
                                <span class="tag">HÃ´tel</span>
                                <span class="tag">Guide</span>
                                <span class="tag">Event</span>
                            </div>
                        </div>
                    </div>

                    <!-- Transport & Logistique -->
                    <div class="sector-stand transport-sector" onclick="showStandInfo('transport')">
                        <div class="sector-icon">ðŸš›</div>
                        <div class="sector-info">
                            <h4 data-fr="TRANSPORT & LOGISTIQUE" data-es="TRANSPORTE & LOGÃSTICA">TRANSPORT & LOGISTIQUE</h4>
                            <div class="company-count" data-fr="4 entreprises" data-es="4 empresas">4 entreprises</div>
                            <div class="sector-tags">
                                <span class="tag">Conduite</span>
                                <span class="tag">Stock</span>
                                <span class="tag">Livraison</span>
                            </div>
                        </div>
                    </div>

                    <!-- Secteur PersonnalisÃ© -->
                    <div class="sector-stand custom-sector" onclick="showCustomSectorModal()">
                        <div class="sector-icon">âž•</div>
                        <div class="sector-info">
                            <h4 data-fr="AJOUTER SECTEUR" data-es="AGREGAR SECTOR">AJOUTER SECTEUR</h4>
                            <div class="company-count" data-fr="CrÃ©er nouveau secteur" data-es="Crear nuevo sector">CrÃ©er nouveau secteur</div>
                            <div class="sector-tags">
                                <span class="tag">Nouveau</span>
                                <span class="tag">Perso</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Zone de dÃ©tente -->
                <div class="rest-area">
                    <div class="rest-zone" onclick="showRestInfo()">
                        <h4 data-fr="â˜• ZONE DÃ‰TENTE" data-es="â˜• ZONA DESCANSO">â˜• ZONE DÃ‰TENTE</h4>
                        <p data-fr="Pause cafÃ© â€¢ Networking" data-es="Pausa cafÃ© â€¢ Networking">Pause cafÃ© â€¢ Networking</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Page 2 - RÃ¨gles du jeu -->
        <div class="page" id="page2">
            <div class="page-header">
                <h1 class="page-title" data-fr="Comment rÃ©ussir ta mission ?" data-es="Â¿CÃ³mo completar tu misiÃ³n?">Comment rÃ©ussir ta mission ?</h1>
                <p class="page-subtitle" data-fr="5 niveaux de dÃ©fis pour devenir un pro !" data-es="Â¡5 niveles de desafÃ­os para convertirte en un pro!">5 niveaux de dÃ©fis pour devenir un pro !</p>
            </div>
            
            <div class="rules-container">
                <div class="challenge-cards">
                    <div class="challenge-card" onclick="completeChallenge(this, 1)">
                        <div class="card-header">
                            <div class="card-level">1</div>
                            <div class="card-title" data-fr="Premier Contact" data-es="Primer Contacto">Premier Contact</div>
                        </div>
                        <div class="card-mission" data-fr="Dire bonjour et se prÃ©senter Ã  un employeur. Donner son prÃ©nom, son Ã¢ge et ce qu'on recherche." data-es="Decir hola y presentarse a un empleador. Dar su nombre, edad y lo que busca.">Dire bonjour et se prÃ©senter Ã  un employeur. Donner son prÃ©nom, son Ã¢ge et ce qu'on recherche.</div>
                        <div class="card-reward">ðŸŽ¯ <span data-fr="Badge Premier Contact" data-es="Insignia Primer Contacto">Badge Premier Contact</span> <strong>+100 pts</strong></div>
                    </div>
                    
                    <div class="challenge-card" onclick="completeChallenge(this, 2)">
                        <div class="card-header">
                            <div class="card-level">2</div>
                            <div class="card-title" data-fr="Communicateur" data-es="Comunicador">Communicateur</div>
                        </div>
                        <div class="card-mission" data-fr="Poser une question sur le mÃ©tier, les missions ou les qualitÃ©s recherchÃ©es. Montrer son intÃ©rÃªt !" data-es="Hacer una pregunta sobre el oficio, las misiones o las cualidades buscadas. Â¡Mostrar interÃ©s!">Poser une question sur le mÃ©tier, les missions ou les qualitÃ©s recherchÃ©es. Montrer son intÃ©rÃªt !</div>
                        <div class="card-reward">ðŸ—£ï¸ <span data-fr="Badge Communicateur" data-es="Insignia Comunicador">Badge Communicateur</span> <strong>+150 pts</strong></div>
                    </div>
                    
                    <div class="challenge-card" onclick="completeChallenge(this, 3)">
                        <div class="card-header">
                            <div class="card-level">3</div>
                            <div class="card-title" data-fr="Candidat Pro" data-es="Candidato Pro">Candidat Pro</div>
                        </div>
                        <div class="card-mission" data-fr="DÃ©poser son CV ou laisser ses coordonnÃ©es. Faire bonne impression avec un document soignÃ©." data-es="Entregar su CV o dejar sus datos. Causar buena impresiÃ³n con un documento cuidado.">DÃ©poser son CV ou laisser ses coordonnÃ©es. Faire bonne impression avec un document soignÃ©.</div>
                        <div class="card-reward">ðŸ“‹ <span data-fr="Badge Candidat Pro" data-es="Insignia Candidato Pro">Badge Candidat Pro</span> <strong>+200 pts</strong></div>
                    </div>
                    
                    <div class="challenge-card card-bonus" onclick="completeChallenge(this, 4)">
                        <div class="card-header">
                            <div class="card-level">4</div>
                            <div class="card-title" data-fr="Networker" data-es="Networker">Networker</div>
                        </div>
                        <div class="card-mission" data-fr="Obtenir une promesse de stage, pÃ©riode d'immersion ou contact privilÃ©giÃ©. CrÃ©er du lien !" data-es="Obtener una promesa de prÃ¡cticas, perÃ­odo de inmersiÃ³n o contacto privilegiado. Â¡Crear vÃ­nculos!">Obtenir une promesse de stage, pÃ©riode d'immersion ou contact privilÃ©giÃ©. CrÃ©er du lien !</div>
                        <div class="card-reward">ðŸ¤ <span data-fr="Badge Networker" data-es="Insignia Networker">Badge Networker</span> <strong>+300 pts</strong></div>
                    </div>
                    
                    <div class="challenge-card card-jackpot" onclick="completeChallenge(this, 5)">
                        <div class="card-header">
                            <div class="card-level">5</div>
                            <div class="card-title" data-fr="Job Hunter" data-es="Job Hunter">Job Hunter</div>
                        </div>
                        <div class="card-mission" data-fr="ÃŠtre rappelÃ© pour un entretien d'embauche ou obtenir une proposition concrÃ¨te. Le Graal !" data-es="Ser llamado para una entrevista de trabajo u obtener una propuesta concreta. Â¡El Grial!">ÃŠtre rappelÃ© pour un entretien d'embauche ou obtenir une proposition concrÃ¨te. Le Graal !</div>
                        <div class="card-reward">ðŸ† <span data-fr="Badge Job Hunter" data-es="Insignia Job Hunter">Badge Job Hunter</span> <strong>+500 pts</strong></div>
                    </div>
                    
                    <div class="challenge-card card-bonus" onclick="completeChallenge(this, 6)">
                        <div class="card-header">
                            <div class="card-level">ðŸŒ±</div>
                            <div class="card-title" data-fr="Ã‰co-Warrior" data-es="Eco-Warrior">Ã‰co-Warrior</div>
                        </div>
                        <div class="card-mission" data-fr="Venir au forum en transport Ã©co-responsable : vÃ©lo, marche, covoiturage ou transport public." data-es="Venir al foro en transporte eco-responsable: bicicleta, caminata, carpooling o transporte pÃºblico.">Venir au forum en transport Ã©co-responsable : vÃ©lo, marche, covoiturage ou transport public.</div>
                        <div class="card-reward">ðŸŒ± <span data-fr="Badge Ã‰co-Warrior" data-es="Insignia Eco-Warrior">Badge Ã‰co-Warrior</span> <strong>+250 pts</strong></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Page 3 - Suivi de parcours -->
        <div class="page" id="page3">
            <div class="page-header">
                <h1 class="page-title" data-fr="Suivi de ton parcours" data-es="Seguimiento de tu recorrido">Suivi de ton parcours</h1>
                <p class="page-subtitle" data-fr="Note tes interactions avec chaque entreprise" data-es="Anota tus interacciones con cada empresa">Note tes interactions avec chaque entreprise</p>
            </div>

            <!-- Compteur d'entreprises visitÃ©es -->
            <div class="companies-counter">
                <h3 data-fr="ðŸ¢ ENTREPRISES VISITÃ‰ES" data-es="ðŸ¢ EMPRESAS VISITADAS">ðŸ¢ ENTREPRISES VISITÃ‰ES</h3>
                <div class="counter-display" id="companiesVisitedCounter">0</div>
                <p data-fr="entreprises rencontrÃ©es" data-es="empresas encontradas" style="margin: 0; font-size: clamp(1rem, 2.5vw, 1.2rem); opacity: 0.9;">entreprises rencontrÃ©es</p>
            </div>
            
            <div class="tracking-table">
                <div class="company-row" style="font-weight: 800; background: # f39200; color: white; border-radius: 15px; margin-bottom: 15px;">
                    <div data-fr="Nom de l'entreprise" data-es="Nombre de la empresa">Nom de l'entreprise</div>
                    <div data-fr="PrÃ©sentation" data-es="PresentaciÃ³n">PrÃ©sentation</div>
                    <div data-fr="Question posÃ©e" data-es="Pregunta hecha">Question posÃ©e</div>
                    <div data-fr="CV dÃ©posÃ©" data-es="CV entregado">CV dÃ©posÃ©</div>
                    <div data-fr="Suivi obtenu" data-es="Seguimiento obtenido">Suivi obtenu</div>
                    <div data-fr="Mon ressenti" data-es="Mi impresiÃ³n">Mon ressenti</div>
                </div>
                
                <div class="company-row">
                    <input type="text" class="company-input company-name-input" placeholder="Entreprise 1" oninput="updateCompaniesCounter()">
                    <div class="checkbox-container"><div class="custom-checkbox" onclick="toggleCheck(this)"></div></div>
                    <div class="checkbox-container"><div class="custom-checkbox" onclick="toggleCheck(this)"></div></div>
                    <div class="checkbox-container"><div class="custom-checkbox" onclick="toggleCheck(this)"></div></div>
                    <div class="checkbox-container"><div class="custom-checkbox" onclick="toggleCheck(this)"></div></div>
                    <input type="text" class="company-input" data-fr="Ã€ revoir..." data-es="Para revisar..." placeholder="Ã€ revoir...">
                </div>
                
                <div class="company-row">
                    <input type="text" class="company-input company-name-input" placeholder="Entreprise 2" oninput="updateCompaniesCounter()">
                    <div class="checkbox-container"><div class="custom-checkbox" onclick="toggleCheck(this)"></div></div>
                    <div class="checkbox-container"><div class="custom-checkbox" onclick="toggleCheck(this)"></div></div>
                    <div class="checkbox-container"><div class="custom-checkbox" onclick="toggleCheck(this)"></div></div>
                    <div class="checkbox-container"><div class="custom-checkbox" onclick="toggleCheck(this)"></div></div>
                    <input type="text" class="company-input" data-fr="Ã€ revoir..." data-es="Para revisar..." placeholder="Ã€ revoir...">
                </div>
                
                <div class="company-row">
                    <input type="text" class="company-input company-name-input" placeholder="Entreprise 3" oninput="updateCompaniesCounter()">
                    <div class="checkbox-container"><div class="custom-checkbox" onclick="toggleCheck(this)"></div></div>
                    <div class="checkbox-container"><div class="custom-checkbox" onclick="toggleCheck(this)"></div></div>
                    <div class="checkbox-container"><div class="custom-checkbox" onclick="toggleCheck(this)"></div></div>
                    <div class="checkbox-container"><div class="custom-checkbox" onclick="toggleCheck(this)"></div></div>
                    <input type="text" class="company-input" data-fr="Ã€ revoir..." data-es="Para revisar..." placeholder="Ã€ revoir...">
                </div>
                
                <div class="company-row">
                    <input type="text" class="company-input company-name-input" placeholder="Entreprise 4" oninput="updateCompaniesCounter()">
                    <div class="checkbox-container"><div class="custom-checkbox" onclick="toggleCheck(this)"></div></div>
                    <div class="checkbox-container"><div class="custom-checkbox" onclick="toggleCheck(this)"></div></div>
                    <div class="checkbox-container"><div class="custom-checkbox" onclick="toggleCheck(this)"></div></div>
                    <div class="checkbox-container"><div class="custom-checkbox" onclick="toggleCheck(this)"></div></div>
                    <input type="text" class="company-input" data-fr="Ã€ revoir..." data-es="Para revisar..." placeholder="Ã€ revoir...">
                </div>
                
                <div class="company-row">
                    <input type="text" class="company-input company-name-input" placeholder="Entreprise 5" oninput="updateCompaniesCounter()">
                    <div class="checkbox-container"><div class="custom-checkbox" onclick="toggleCheck(this)"></div></div>
                    <div class="checkbox-container"><div class="custom-checkbox" onclick="toggleCheck(this)"></div></div>
                    <div class="checkbox-container"><div class="custom-checkbox" onclick="toggleCheck(this)"></div></div>
                    <div class="checkbox-container"><div class="custom-checkbox" onclick="toggleCheck(this)"></div></div>
                    <input type="text" class="company-input" data-fr="Ã€ revoir..." data-es="Para revisar..." placeholder="Ã€ revoir...">
                </div>

                <div class="company-row">
                    <input type="text" class="company-input company-name-input" placeholder="Entreprise 6" oninput="updateCompaniesCounter()">
                    <div class="checkbox-container"><div class="custom-checkbox" onclick="toggleCheck(this)"></div></div>
                    <div class="checkbox-container"><div class="custom-checkbox" onclick="toggleCheck(this)"></div></div>
                    <div class="checkbox-container"><div class="custom-checkbox" onclick="toggleCheck(this)"></div></div>
                    <div class="checkbox-container"><div class="custom-checkbox" onclick="toggleCheck(this)"></div></div>
                    <input type="text" class="company-input" data-fr="Ã€ revoir..." data-es="Para revisar..." placeholder="Ã€ revoir...">
                </div>

                <div class="company-row">
                    <input type="text" class="company-input company-name-input" placeholder="Entreprise 7" oninput="updateCompaniesCounter()">
                    <div class="checkbox-container"><div class="custom-checkbox" onclick="toggleCheck(this)"></div></div>
                    <div class="checkbox-container"><div class="custom-checkbox" onclick="toggleCheck(this)"></div></div>
                    <div class="checkbox-container"><div class="custom-checkbox" onclick="toggleCheck(this)"></div></div>
                    <div class="checkbox-container"><div class="custom-checkbox" onclick="toggleCheck(this)"></div></div>
                    <input type="text" class="company-input" data-fr="Ã€ revoir..." data-es="Para revisar..." placeholder="Ã€ revoir...">
                </div>

                <div class="company-row">
                    <input type="text" class="company-input company-name-input" placeholder="Entreprise 8" oninput="updateCompaniesCounter()">
                    <div class="checkbox-container"><div class="custom-checkbox" onclick="toggleCheck(this)"></div></div>
                    <div class="checkbox-container"><div class="custom-checkbox" onclick="toggleCheck(this)"></div></div>
                    <div class="checkbox-container"><div class="custom-checkbox" onclick="toggleCheck(this)"></div></div>
                    <div class="checkbox-container"><div class="custom-checkbox" onclick="toggleCheck(this)"></div></div>
                    <input type="text" class="company-input" data-fr="Ã€ revoir..." data-es="Para revisar..." placeholder="Ã€ revoir...">
                </div>
            </div>
        </div>

        <!-- Page 4 - Questions -->
        <div class="page" id="page4">
            <div class="page-header">
                <h1 class="page-title" data-fr="Besoin d'aide pour dÃ©marrer ?" data-es="Â¿Necesitas ayuda para empezar?">Besoin d'aide pour dÃ©marrer ?</h1>
                <p class="page-subtitle" data-fr="Questions types pour briser la glace" data-es="Preguntas tipo para romper el hielo">Questions types pour briser la glace</p>
            </div>
            
            <div class="questions-container">
                <div class="question-item" onclick="selectQuestion(this)">
                    <div class="question-icon">ðŸŽ¯</div>
                    <div data-fr="Quelles sont les qualitÃ©s que vous recherchez le plus ?" data-es="Â¿CuÃ¡les son las cualidades que mÃ¡s buscan?">Quelles sont les qualitÃ©s que vous recherchez le plus ?</div>
                </div>
                
                <div class="question-item" onclick="selectQuestion(this)">
                    <div class="question-icon">ðŸ’¼</div>
                    <div data-fr="Quels mÃ©tiers recrutent le plus dans votre entreprise ?" data-es="Â¿QuÃ© profesiones reclutan mÃ¡s en su empresa?">Quels mÃ©tiers recrutent le plus dans votre entreprise ?</div>
                </div>
                
                <div class="question-item" onclick="selectQuestion(this)">
                    <div class="question-icon">ðŸŽ“</div>
                    <div data-fr="Proposez-vous des stages ou des immersions ?" data-es="Â¿Ofrecen prÃ¡cticas o inmersiones?">Proposez-vous des stages ou des immersions ?</div>
                </div>
                
                <div class="question-item" onclick="selectQuestion(this)">
                    <div class="question-icon">ðŸ“š</div>
                    <div data-fr="Faut-il un diplÃ´me ou une expÃ©rience ?" data-es="Â¿Se necesita un diploma o experiencia?">Faut-il un diplÃ´me ou une expÃ©rience ?</div>
                </div>
                
                <div class="question-item" onclick="selectQuestion(this)">
                    <div class="question-icon">ðŸŒŸ</div>
                    <div data-fr="Peut-on postuler mÃªme si on n'a jamais travaillÃ© ?" data-es="Â¿Se puede postular aunque nunca se haya trabajado?">Peut-on postuler mÃªme si on n'a jamais travaillÃ© ?</div>
                </div>
                
                <div class="question-item" onclick="selectQuestion(this)">
                    <div class="question-icon">â°</div>
                    <div data-fr="Comment se dÃ©roule une journÃ©e type ?" data-es="Â¿CÃ³mo transcurre un dÃ­a tÃ­pico?">Comment se dÃ©roule une journÃ©e type ?</div>
                </div>
                
                <div class="question-item" onclick="selectQuestion(this)">
                    <div class="question-icon">ðŸš€</div>
                    <div data-fr="Quelles sont les perspectives d'Ã©volution ?" data-es="Â¿CuÃ¡les son las perspectivas de evoluciÃ³n?">Quelles sont les perspectives d'Ã©volution ?</div>
                </div>
                
                <div class="question-item" onclick="selectQuestion(this)">
                    <div class="question-icon">ðŸ¤</div>
                    <div data-fr="Comment fonctionne l'Ã©quipe de travail ?" data-es="Â¿CÃ³mo funciona el equipo de trabajo?">Comment fonctionne l'Ã©quipe de travail ?</div>
                </div>
                
                <div class="question-item" onclick="selectQuestion(this)">
                    <div class="question-icon">ðŸ’°</div>
                    <div data-fr="Quels sont les horaires et la rÃ©munÃ©ration ?" data-es="Â¿CuÃ¡les son los horarios y la remuneraciÃ³n?">Quels sont les horaires et la rÃ©munÃ©ration ?</div>
                </div>
                
                <div class="question-item" onclick="selectQuestion(this)">
                    <div class="question-icon">ðŸ“ž</div>
                    <div data-fr="Comment puis-je vous recontacter ?" data-es="Â¿CÃ³mo puedo volver a contactarlos?">Comment puis-je vous recontacter ?</div>
                </div>
                
                <button class="personal-questions" onclick="addPersonalQuestion()">
                    <span data-fr="âœï¸ Mes questions personnelles" data-es="âœï¸ Mis preguntas personales">âœï¸ Mes questions personnelles</span>
                </button>
            </div>
        </div>

        <!-- Page 5 - Validation -->
        <div class="page" id="page5">
            <div class="page-header">
                <h1 class="page-title" data-fr="Mission accomplie !" data-es="Â¡MisiÃ³n cumplida!">Mission accomplie !</h1>
                <p class="page-subtitle" data-fr="Collecte tes badges et retrouve ton conseiller" data-es="Colecciona tus insignias y encuentra a tu consejero">Collecte tes badges et retrouve ton conseiller</p>
            </div>
            
            <!-- Compteur de points -->
            <div style="background: linear-gradient(135deg, #f39200, #d60b52); color: white; padding: 25px; border-radius: 25px; text-align: center; margin: 20px auto 30px auto; max-width: 600px; border: 5px solid #171718; box-shadow: 8px 8px 0px #95c11f;">
                <h2 style="margin: 0 0 15px 0; font-size: clamp(1.5rem, 4vw, 2rem); font-weight: 800;">
                    ðŸ† <span data-fr="SCORE TOTAL" data-es="PUNTUACIÃ“N TOTAL">SCORE TOTAL</span> ðŸ†
                </h2>
                <div style="font-size: clamp(2.5rem, 6vw, 3rem); font-weight: 900; margin: 15px 0; text-shadow: 3px 3px 6px rgba(0,0,0,0.3);">
                    <span id="totalPoints">0</span> <span data-fr="POINTS" data-es="PUNTOS">POINTS</span>
                </div>
                <div id="currentRank" style="background: rgba(255,255,255,0.2); padding: 12px 25px; border-radius: 20px; font-size: clamp(1rem, 2.5vw, 1.2rem); font-weight: 700; margin-top: 15px; border: 3px solid rgba(255,255,255,0.3);">
                    <span data-fr="ðŸŒŸ DÃ©butant MotivÃ©" data-es="ðŸŒŸ Principiante Motivado">ðŸŒŸ DÃ©butant MotivÃ©</span>
                </div>
                <div style="margin-top: 20px;">
                    <div style="background: rgba(255,255,255,0.3); height: 12px; border-radius: 6px; overflow: hidden; border: 2px solid rgba(255,255,255,0.5);">
                        <div id="progressBar" style="background: linear-gradient(90deg, #95c11f, #2897d5); height: 100%; width: 0%; transition: width 0.8s ease; border-radius: 4px;"></div>
                    </div>
                    <div id="nextRankInfo" style="margin-top: 8px; font-size: clamp(0.8rem, 2vw, 0.9rem); opacity: 0.9;">
                        <span data-fr="Prochain rang : ðŸš€ Candidat Actif (500 pts)" data-es="PrÃ³ximo rango: ðŸš€ Candidato Activo (500 pts)">Prochain rang : ðŸš€ Candidat Actif (500 pts)</span>
                    </div>
                </div>
            </div>
            
            <div class="validation-container">
                <div class="sticker-collection">
                    <h3 data-fr="Colle tes badges Mission Locale !" data-es="Â¡Pega tus insignias MisiÃ³n Local!">Colle tes badges Mission Locale !</h3>
                    <div class="badges-grid">
                        <div class="badge-sticker ml-badge-1" onclick="unlockBadge(this, 1)">
                            <div class="badge-icon">ðŸŽ¯</div>
                            <div class="badge-name" data-fr="Premier Contact" data-es="Primer Contacto">Premier Contact</div>
                        </div>
                        
                        <div class="badge-sticker ml-badge-2" onclick="unlockBadge(this, 2)">
                            <div class="badge-icon">ðŸ—£ï¸</div>
                            <div class="badge-name" data-fr="Communicateur" data-es="Comunicador">Communicateur</div>
                        </div>
                        
                        <div class="badge-sticker ml-badge-3" onclick="unlockBadge(this, 3)">
                            <div class="badge-icon">ðŸ“‹</div>
                            <div class="badge-name" data-fr="Candidat Pro" data-es="Candidato Pro">Candidat Pro</div>
                        </div>
                        
                        <div class="badge-sticker ml-badge-4" onclick="unlockBadge(this, 4)">
                            <div class="badge-icon">ðŸ¤</div>
                            <div class="badge-name" data-fr="Networker" data-es="Networker">Networker</div>
                        </div>
                        
                        <div class="badge-sticker ml-badge-5" onclick="unlockBadge(this, 5)">
                            <div class="badge-icon">ðŸ†</div>
                            <div class="badge-name" data-fr="Job Hunter" data-es="Job Hunter">Job Hunter</div>
                        </div>
                        
                        <div class="badge-sticker ml-badge-bonus" onclick="unlockBadge(this, 6)">
                            <div class="badge-icon">ðŸŒ±</div>
                            <div class="badge-name" data-fr="Ã‰co-Warrior" data-es="Eco-Warrior">Ã‰co-Warrior</div>
                        </div>
                    </div>
                </div>
                
                <!-- Compteur MobilitÃ© Verte -->
                <div class="mobility-tracker">
                    <h3 data-fr="ðŸŒ± Challenge MobilitÃ© Bien-Ãªtre" data-es="ðŸŒ± DesafÃ­o Movilidad Bienestar">ðŸŒ± Challenge MobilitÃ© Bien-Ãªtre</h3>
                    <div class="mobility-grid">
                        <div class="mobility-item">
                            <div class="mobility-icon">ðŸš¶â€â™‚ï¸</div>
                            <div class="mobility-counter">
                                <input type="number" id="steps" min="0" step="100" placeholder="0" onchange="updateMobility()">
                                <label data-fr="nombre de pas" data-es="nÃºmero de pasos">nombre de pas</label>
                            </div>
                        </div>
                        <div class="mobility-item">
                            <div class="mobility-icon">ðŸš´â€â™‚ï¸</div>
                            <div class="mobility-counter">
                                <input type="number" id="bike" min="0" step="0.1" placeholder="0" onchange="updateMobility()">
                                <label data-fr="km vÃ©lo" data-es="km bici">km vÃ©lo</label>
                            </div>
                        </div>
                        <div class="mobility-item">
                            <div class="mobility-icon">ðŸšŒ</div>
                            <div class="mobility-counter">
                                <input type="checkbox" id="publicTransport" onchange="updateMobility()">
                                <label data-fr="Transport public" data-es="Transporte pÃºblico">Transport public</label>
                            </div>
                        </div>
                        <div class="mobility-item">
                            <div class="mobility-icon">ðŸš—</div>
                            <div class="mobility-counter">
                                <input type="checkbox" id="carpool" onchange="updateMobility()">
                                <label data-fr="Covoiturage" data-es="Carpooling">Covoiturage</label>
                            </div>
                        </div>
                    </div>
                    <div class="eco-score">
                        <span data-fr="Score Ã‰co :" data-es="PuntuaciÃ³n Eco:">Score Ã‰co :</span>
                        <span id="ecoScore">0</span>
                        <span data-fr="points" data-es="puntos">points</span>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button class="action-btn" onclick="generateQR()">
                        <span data-fr="ðŸ“± GÃ©nÃ©rer QR Code" data-es="ðŸ“± Generar CÃ³digo QR">ðŸ“± GÃ©nÃ©rer QR Code</span>
                    </button>
                    <button class="action-btn" onclick="downloadPDFReport()">
                        <span data-fr="ðŸ“„ TÃ©lÃ©charger Bilan PDF" data-es="ðŸ“„ Descargar Balance PDF">ðŸ“„ TÃ©lÃ©charger Bilan PDF</span>
                    </button>
                    <button class="action-btn" onclick="shareResults()">
                        <span data-fr="ðŸ“¤ Partager RÃ©sultats" data-es="ðŸ“¤ Compartir Resultados">ðŸ“¤ Partager RÃ©sultats</span>
                    </button>
                </div>
                
                <div class="qr-code" id="qrCode" style="display: none;">
                    <span data-fr="QR Code gÃ©nÃ©rÃ© !" data-es="Â¡CÃ³digo QR generado!">QR Code gÃ©nÃ©rÃ© !</span>
                </div>
            </div>
        </div>

        <!-- Navigation -->
        <div class="nav-buttons">
            <div class="nav-btn active" onclick="showPage(1)">1</div>
            <div class="nav-btn" onclick="showPage(2)">2</div>
            <div class="nav-btn" onclick="showPage(3)">3</div>
            <div class="nav-btn" onclick="showPage(4)">4</div>
            <div class="nav-btn" onclick="showPage(5)">5</div>
        </div>

        <!-- Modal fiches entreprises -->
        <div id="companyModal" class="modal" onclick="handleModalClick(event)">
            <div class="modal-content" onclick="event.stopPropagation()">
                <div class="modal-header">
                    <h2 class="modal-title" id="modalTitle">Secteur Tech & Digital</h2>
                    <button class="close" onclick="closeModal()">&times;</button>
                </div>
                <div class="modal-body">
                    <button class="add-company-btn" onclick="addCompany()">
                        <span data-fr="âž• Ajouter une entreprise" data-es="âž• Agregar una empresa">âž• Ajouter une entreprise</span>
                    </button>
                    <div class="companies-grid" id="companiesGrid">
                        <!-- Les entreprises seront ajoutÃ©es dynamiquement -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal crÃ©ation secteur personnalisÃ© -->
        <div id="customSectorModal" class="modal" onclick="handleCustomModalClick(event)">
            <div class="modal-content" onclick="event.stopPropagation()">
                <div class="modal-header" style="background: linear-gradient(135deg, #95c11f, #2897d5);">
                    <h2 class="modal-title" data-fr="ðŸ¢ CrÃ©er un nouveau secteur" data-es="ðŸ¢ Crear un nuevo sector">ðŸ¢ CrÃ©er un nouveau secteur</h2>
                    <button class="close" onclick="closeCustomSectorModal()">&times;</button>
                </div>
                <div class="modal-body">
                    <div style="background: linear-gradient(135deg, rgba(149,193,31,0.1), rgba(40,151,213,0.1)); border: 3px solid #95c11f; border-radius: 20px; padding: 30px 20px; margin-bottom: 30px;">
                        <h3 style="color: #95c11f; font-weight: 700; margin-bottom: 20px; text-align: center; font-size: clamp(1rem, 2.5vw, 1.2rem);">
                            <span data-fr="ðŸ“‹ Informations du secteur" data-es="ðŸ“‹ InformaciÃ³n del sector">ðŸ“‹ Informations du secteur</span>
                        </h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 20px;">
                            <div>
                                <label style="display: block; font-weight: 600; margin-bottom: 8px; color: #171718; font-size: clamp(0.9rem, 2vw, 1rem);">
                                    <span data-fr="Nom du secteur :" data-es="Nombre del sector:">Nom du secteur :</span>
                                </label>
                                <input type="text" id="customSectorName" placeholder="Ex: Agriculture & Environnement" style="width: 100%; padding: 12px; border: 3px solid #95c11f; border-radius: 15px; font-weight: 600;">
                            </div>
                            <div>
                                <label style="display: block; font-weight: 600; margin-bottom: 8px; color: #171718; font-size: clamp(0.9rem, 2vw, 1rem);">
                                    <span data-fr="IcÃ´ne (emoji) :" data-es="Icono (emoji):">IcÃ´ne (emoji) :</span>
                                </label>
                                <input type="text" id="customSectorIcon" placeholder="ðŸŒ±" maxlength="2" style="width: 100%; padding: 12px; border: 3px solid #95c11f; border-radius: 15px; font-weight: 600; text-align: center; font-size: 1.2rem;">
                            </div>
                        </div>
                        <div>
                            <label style="display: block; font-weight: 600; margin-bottom: 8px; color: #171718; font-size: clamp(0.9rem, 2vw, 1rem);">
                                <span data-fr="Tags (sÃ©parÃ©s par des virgules) :" data-es="Tags (separados por comas):">Tags (sÃ©parÃ©s par des virgules) :</span>
                            </label>
                            <input type="text" id="customSectorTags" placeholder="Bio, Nature, Durable" style="width: 100%; padding: 12px; border: 3px solid #95c11f; border-radius: 15px; font-weight: 600;">
                        </div>
                        <button onclick="createCustomSector()" style="background: linear-gradient(45deg, #95c11f, #2897d5); color: white; border: none; padding: 15px 30px; border-radius: 25px; font-weight: 700; cursor: pointer; margin-top: 20px; width: 100%; font-size: clamp(1rem, 2.5vw, 1.1rem); border: 3px solid white;">
                            <span data-fr="âœ… CrÃ©er le secteur" data-es="âœ… Crear el sector">âœ… CrÃ©er le secteur</span>
                        </button>
                    </div>

                    <div style="background: linear-gradient(135deg, rgba(243,146,0,0.1), rgba(214,11,82,0.1)); border: 3px solid #f39200; border-radius: 20px; padding: 30px 20px;">
                        <h3 style="color: #f39200; font-weight: 700; margin-bottom: 20px; text-align: center; font-size: clamp(1rem, 2.5vw, 1.2rem);">
                            <span data-fr="ðŸ¢ Ajouter une entreprise" data-es="ðŸ¢ Agregar una empresa">ðŸ¢ Ajouter une entreprise</span>
                        </h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 20px;">
                            <div>
                                <label style="display: block; font-weight: 600; margin-bottom: 8px; color: #171718; font-size: clamp(0.9rem, 2vw, 1rem);">
                                    <span data-fr="Nom de l'entreprise :" data-es="Nombre de la empresa:">Nom de l'entreprise :</span>
                                </label>
                                <input type="text" id="companyName" placeholder="Ex: EcoFarm Solutions" style="width: 100%; padding: 12px; border: 3px solid #f39200; border-radius: 15px; font-weight: 600;">
                            </div>
                            <div>
                                <label style="display: block; font-weight: 600; margin-bottom: 8px; color: #171718; font-size: clamp(0.9rem, 2vw, 1rem);">
                                    <span data-fr="ActivitÃ© :" data-es="Actividad:">ActivitÃ© :</span>
                                </label>
                                <input type="text" id="companyActivity" placeholder="Ex: Agriculture biologique" style="width: 100%; padding: 12px; border: 3px solid #f39200; border-radius: 15px; font-weight: 600;">
                            </div>
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 20px;">
                            <div>
                                <label style="display: block; font-weight: 600; margin-bottom: 8px; color: #171718; font-size: clamp(0.9rem, 2vw, 1rem);">
                                    <span data-fr="Email de contact :" data-es="Email de contacto:">Email de contact :</span>
                                </label>
                                <input type="email" id="companyEmail" placeholder="contact@ecofarm.fr" style="width: 100%; padding: 12px; border: 3px solid #f39200; border-radius: 15px; font-weight: 600;">
                            </div>
                            <div>
                                <label style="display: block; font-weight: 600; margin-bottom: 8px; color: #171718; font-size: clamp(0.9rem, 2vw, 1rem);">
                                    <span data-fr="TÃ©lÃ©phone :" data-es="TelÃ©fono:">TÃ©lÃ©phone :</span>
                                </label>
                                <input type="tel" id="companyPhone" placeholder="01 23 45 67 89" style="width: 100%; padding: 12px; border: 3px solid #f39200; border-radius: 15px; font-weight: 600;">
                            </div>
                            </div>
                        <button onclick="addCustomCompany()" style="background: linear-gradient(45deg, #f39200, #d60b52); color: white; border: none; padding: 15px 30px; border-radius: 25px; font-weight: 700; cursor: pointer; width: 100%; font-size: clamp(1rem, 2.5vw, 1.1rem); border: 3px solid white;">
                            <span data-fr="âž• Ajouter l'entreprise" data-es="âž• Agregar la empresa">âž• Ajouter l'entreprise</span>
                        </button>
                    </div>

                    <div id="customCompaniesGrid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px; margin-top: 30px;">
                        <!-- Les entreprises personnalisÃ©es apparaÃ®tront ici -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
    // Variables globales
    let currentLanguage = 'fr';
    let currentPage = 1;
    let playerData = {
        firstName: '',
        lastName: '',
        projectName: '',
        logoUrl: '',
        cvFile: null
    };
    let gameData = {
        badges: [],
        completedChallenges: [],
        companies: {},
        visitedCompanies: [],
        points: 0,
        mobility: {
            steps: 0,
            bike: 0,
            publicTransport: false,
            carpool: false
        }
    };

    // SystÃ¨me de points par dÃ©fi
    const challengePoints = {
        1: 100,
        2: 150,
        3: 200,
        4: 300,
        5: 500,
        6: 250
    };

    // Paliers de rÃ©compenses
    const pointsRewards = {
        0: { name: 'DÃ©butant MotivÃ©', icon: 'ðŸŒŸ', color: '#2897d5' },
        500: { name: 'Candidat Actif', icon: 'ðŸš€', color: '#95c11f' },
        1000: { name: 'Pro du Networking', icon: 'ðŸ¤', color: '#f39200' },
        1500: { name: 'Expert Mission', icon: 'ðŸ†', color: '#d60b52' },
        2000: { name: 'LÃ©gende du Forum', icon: 'ðŸ‘‘', color: '#a3195b' }
    };
    
    let customSectors = [];
    let customCompanies = [];

    // DonnÃ©es des secteurs
    const sectorsData = {
        tech: {
            name: { fr: 'Tech & Digital', es: 'Tech & Digital' },
            companies: [
                { name: 'WebDev Solutions', info: 'DÃ©veloppement web et applications mobiles', tags: ['Dev', 'Web', 'Mobile'] },
                { name: 'AI Innovations', info: 'Intelligence artificielle et machine learning', tags: ['IA', 'Data', 'Innovation'] },
                { name: 'CyberSec Pro', info: 'CybersÃ©curitÃ© et protection des donnÃ©es', tags: ['SÃ©curitÃ©', 'RÃ©seau', 'Protection'] },
                { name: 'Cloud Systems', info: 'Solutions cloud et infrastructure', tags: ['Cloud', 'Infra', 'SystÃ¨me'] },
                { name: 'UX Design Studio', info: 'Design d\'expÃ©rience utilisateur', tags: ['UX', 'Design', 'Interface'] }
            ]
        },
        resto: {
            name: { fr: 'Restauration', es: 'RestauraciÃ³n' },
            companies: [
                { name: 'Le Gourmet', info: 'Restaurant gastronomique franÃ§ais', tags: ['Chef', 'Gastro', 'Service'] },
                { name: 'Pizza Express', info: 'Pizzeria rapide et livraison', tags: ['Rapide', 'Livraison', 'Italien'] },
                { name: 'CafÃ© Central', info: 'CafÃ©-brasserie du centre-ville', tags: ['CafÃ©', 'Brasserie', 'Accueil'] },
                { name: 'Traiteur Deluxe', info: 'Service traiteur Ã©vÃ©nementiel', tags: ['Traiteur', 'Ã‰vÃ©nement', 'Buffet'] },
                { name: 'Boulangerie Artisan', info: 'Boulangerie traditionnelle', tags: ['Pain', 'Artisan', 'Tradition'] },
                { name: 'Restaurant Scolaire', info: 'Restauration collective', tags: ['Collectif', 'Scolaire', 'Nutrition'] },
                { name: 'Food Truck Gourmet', info: 'Cuisine mobile haut de gamme', tags: ['Mobile', 'Street Food', 'Innovation'] },
                { name: 'HÃ´tel Restaurant', info: 'Restaurant d\'hÃ´tel 4 Ã©toiles', tags: ['HÃ´tel', 'Luxe', 'Service'] }
            ]
        },
        sante: {
            name: { fr: 'SantÃ© & Social', es: 'Salud & Social' },
            companies: [
                { name: 'Clinique Saint-Martin', info: 'Ã‰tablissement de soins privÃ©', tags: ['Clinique', 'Soins', 'MÃ©dical'] },
                { name: 'EHPAD Les Jardins', info: 'Maison de retraite mÃ©dicalisÃ©e', tags: ['EHPAD', 'Seniors', 'Accompagnement'] },
                { name: 'Centre Social Municipal', info: 'Services sociaux de proximitÃ©', tags: ['Social', 'Aide', 'ProximitÃ©'] },
                { name: 'Pharmacie Centrale', info: 'Officine pharmaceutique', tags: ['Pharmacie', 'Conseil', 'SantÃ©'] },
                { name: 'Aide Ã  Domicile Plus', info: 'Services d\'aide Ã  la personne', tags: ['Domicile', 'Aide', 'Autonomie'] },
                { name: 'Cabinet Infirmier', info: 'Soins infirmiers libÃ©raux', tags: ['Infirmier', 'Soins', 'LibÃ©ral'] }
            ]
        },
        commerce: {
            name: { fr: 'Commerce', es: 'Comercio' },
            companies: [
                { name: 'Galeries Lafayette', info: 'Grand magasin mode et luxe', tags: ['Mode', 'Luxe', 'Conseil'] },
                { name: 'SuperMarchÃ© Bio', info: 'Alimentation biologique', tags: ['Bio', 'Alimentaire', 'Ã‰cologie'] },
                { name: 'Ã‰lectro Discount', info: 'Ã‰lectromÃ©nager et high-tech', tags: ['Ã‰lectro', 'High-tech', 'Discount'] },
                { name: 'Boutique Tendance', info: 'PrÃªt-Ã -porter jeune', tags: ['Mode', 'Jeune', 'Tendance'] },
                { name: 'Librairie du Centre', info: 'Librairie gÃ©nÃ©raliste', tags: ['Livre', 'Culture', 'Conseil'] },
                { name: 'Magasin de Sport', info: 'Articles de sport et loisirs', tags: ['Sport', 'Loisir', 'Ã‰quipement'] },
                { name: 'Bijouterie PrÃ©cieuse', info: 'Bijoux et montres', tags: ['Bijou', 'Montre', 'Luxe'] },
                { name: 'Jardinerie Verte', info: 'Plantes et jardinage', tags: ['Jardin', 'Plante', 'Nature'] },
                { name: 'Bazar du Coin', info: 'Bazar et articles divers', tags: ['Bazar', 'Divers', 'Pratique'] },
                { name: 'Opticien Vision', info: 'Lunettes et lentilles', tags: ['Optique', 'Lunette', 'Vision'] },
                { name: 'Parfumerie Ã‰lÃ©gance', info: 'Parfums et cosmÃ©tiques', tags: ['Parfum', 'CosmÃ©tique', 'BeautÃ©'] },
                { name: 'Magasin de Jouets', info: 'Jouets et jeux pour enfants', tags: ['Jouet', 'Enfant', 'Jeu'] }
            ]
        },
        artisan: {
            name: { fr: 'Artisanat & BTP', es: 'ArtesanÃ­a & BTP' },
            companies: [
                { name: 'Menuiserie Dubois', info: 'Menuiserie traditionnelle et moderne', tags: ['Bois', 'Meuble', 'Artisan'] },
                { name: 'Ã‰lectricitÃ© Pro', info: 'Installation Ã©lectrique rÃ©sidentielle', tags: ['Ã‰lectricitÃ©', 'Installation', 'RÃ©sidentiel'] },
                { name: 'Plomberie Express', info: 'Plomberie et chauffage', tags: ['Plomberie', 'Chauffage', 'DÃ©pannage'] },
                { name: 'MaÃ§onnerie Solide', info: 'Gros Å“uvre et rÃ©novation', tags: ['MaÃ§onnerie', 'Gros Å“uvre', 'RÃ©novation'] },
                { name: 'Peinture DÃ©co', info: 'Peinture et dÃ©coration intÃ©rieure', tags: ['Peinture', 'DÃ©coration', 'IntÃ©rieur'] },
                { name: 'Couverture Toit', info: 'Couverture et charpente', tags: ['Couverture', 'Charpente', 'Toit'] },
                { name: 'Carrelage Design', info: 'Pose de carrelage et faÃ¯ence', tags: ['Carrelage', 'FaÃ¯ence', 'Sol'] }
            ]
        },
        service: {
            name: { fr: 'Services', es: 'Servicios' },
            companies: [
                { name: 'Banque Populaire', info: 'Services bancaires et financiers', tags: ['Banque', 'Finance', 'Conseil'] },
                { name: 'Assurance Vie', info: 'Assurances tous risques', tags: ['Assurance', 'Protection', 'Conseil'] },
                { name: 'Cabinet Comptable', info: 'Expertise comptable et fiscale', tags: ['ComptabilitÃ©', 'Fiscal', 'Gestion'] },
                { name: 'Agence ImmobiliÃ¨re', info: 'Vente et location immobiliÃ¨re', tags: ['Immobilier', 'Vente', 'Location'] },
                { name: 'Nettoyage Pro', info: 'Nettoyage industriel et bureaux', tags: ['Nettoyage', 'Entretien', 'HygiÃ¨ne'] },
                { name: 'SÃ©curitÃ© Garde', info: 'Gardiennage et surveillance', tags: ['SÃ©curitÃ©', 'Surveillance', 'Protection'] },
                { name: 'Avocat Conseil', info: 'Cabinet d\'avocats gÃ©nÃ©ralistes', tags: ['Droit', 'Conseil', 'Juridique'] },
                { name: 'Agence Marketing', info: 'Communication et publicitÃ©', tags: ['Marketing', 'Communication', 'PublicitÃ©'] },
                { name: 'Formation Pro', info: 'Organisme de formation professionnelle', tags: ['Formation', 'Apprentissage', 'CompÃ©tences'] }
            ]
        },
        tourisme: {
            name: { fr: 'Tourisme & HÃ´tellerie', es: 'Turismo & HostelerÃ­a' },
            companies: [
                { name: 'HÃ´tel 4 Ã‰toiles', info: 'HÃ´tellerie de luxe centre-ville', tags: ['HÃ´tel', 'Luxe', 'Accueil'] },
                { name: 'Camping Les Pins', info: 'Camping familial 3 Ã©toiles', tags: ['Camping', 'Famille', 'Nature'] },
                { name: 'Agence Voyage', info: 'Organisation de voyages sur mesure', tags: ['Voyage', 'Organisation', 'Conseil'] },
                { name: 'Office Tourisme', info: 'Promotion du territoire local', tags: ['Tourisme', 'Information', 'Territoire'] },
                { name: 'Guide Montagne', info: 'Accompagnement randonnÃ©e et escalade', tags: ['Guide', 'Montagne', 'Sport'] },
                { name: 'Parc Attractions', info: 'Parc de loisirs familial', tags: ['Loisir', 'Famille', 'Animation'] }
            ]
        },
        transport: {
            name: { fr: 'Transport & Logistique', es: 'Transporte & LogÃ­stica' },
            companies: [
                { name: 'Transport Rapide', info: 'Transport routier de marchandises', tags: ['Transport', 'Routier', 'Marchandise'] },
                { name: 'Logistique Stock', info: 'Entreposage et distribution', tags: ['Logistique', 'Stock', 'Distribution'] },
                { name: 'Taxi Local', info: 'Transport de personnes local', tags: ['Taxi', 'Transport', 'Personne'] },
                { name: 'Livraison Express', info: 'Livraison rapide colis', tags: ['Livraison', 'Colis', 'Express'] }
            ]
        }
    };

    // ========== FONCTIONS PRINCIPALES ==========
    
    // Fonctions de navigation
    window.showPage = function(pageNum) {
        console.log('Changement de page vers:', pageNum);
        document.querySelectorAll('.page').forEach(page => {
            page.classList.remove('active');
        });
        
        const targetPage = document.getElementById(`page${pageNum}`);
        if (targetPage) {
            targetPage.classList.add('active');
        }
        
        document.querySelectorAll('.nav-btn').forEach(btn => {
            btn.classList.remove('active');
        });
        const navBtns = document.querySelectorAll('.nav-btn');
        if (navBtns[pageNum - 1]) {
            navBtns[pageNum - 1].classList.add('active');
        }
        
        currentPage = pageNum;

        if (pageNum === 3) {
            updateCompaniesCounter();
        }
    };

    // Fonctions de langue
    window.setLanguage = function(lang) {
        currentLanguage = lang;
        
        document.querySelectorAll('.lang-btn').forEach(btn => {
            btn.classList.remove('active');
        });
        
        const langBtns = document.querySelectorAll('.lang-btn');
        langBtns.forEach(btn => {
            if (btn.textContent.includes(lang.toUpperCase())) {
                btn.classList.add('active');
            }
        });
        
        document.querySelectorAll('[data-fr]').forEach(element => {
            if (element.hasAttribute(`data-${lang}`)) {
                if (element.tagName === 'INPUT' && (element.type === 'text' || element.type === 'email' || element.type === 'tel')) {
                    element.placeholder = element.getAttribute(`data-${lang}`);
                } else {
                    element.textContent = element.getAttribute(`data-${lang}`);
                }
            }
        });
    };

    // Fonctions de personnalisation
    window.updateIdentity = function() {
        playerData.firstName = document.getElementById('firstName').value;
        playerData.lastName = document.getElementById('lastName').value;
    };

    // Fonctions de gestion des fichiers
    window.triggerMainCVUpload = function() {
        document.getElementById('cvFileInputMain').click();
    };

    window.handleMainCVUpload = function(event) {
        const file = event.target.files[0];
        if (file) {
            playerData.cvFile = file;
            document.getElementById('cvFileNameMain').textContent = file.name;
            document.getElementById('cvUploadContentMain').style.display = 'none';
            document.getElementById('cvPreviewMain').style.display = 'flex';
            document.getElementById('cvUploadAreaMain').classList.add('has-cv');
        }
    };

    window.removeMainCV = function(event) {
        event.stopPropagation();
        playerData.cvFile = null;
        document.getElementById('cvUploadContentMain').style.display = 'block';
        document.getElementById('cvPreviewMain').style.display = 'none';
        document.getElementById('cvUploadAreaMain').classList.remove('has-cv');
        document.getElementById('cvFileInputMain').value = '';
    };

    // Fonctions de tÃ©lÃ©chargement
    window.downloadLogo = function() {
        alert(currentLanguage === 'fr' ? 'Fonction de tÃ©lÃ©chargement du logo' : 'FunciÃ³n de descarga del logo');
    };

    window.downloadForumName = function() {
        const forumName = 'Forum Mission Locale Pays Basque';
        const blob = new Blob([forumName], { type: 'text/plain' });
        const link = document.createElement('a');
        link.href = URL.createObjectURL(blob);
        link.download = 'nom-forum.txt';
        link.click();
    };

    // Fonctions du jeu
    window.registerPlayer = function() {
        const firstName = playerData.firstName || 'Joueur';
        const lastName = playerData.lastName || 'Anonyme';
        
        document.getElementById('playerName').textContent = `${firstName} ${lastName}`;
        document.getElementById('playerInfo').style.display = 'block';
    };

    window.rollDice = function() {
        const faces = ['âš€', 'âš', 'âš‚', 'âšƒ', 'âš„', 'âš…'];
        let counter = 0;
        const diceElement = event.currentTarget;
        
        const interval = setInterval(() => {
            diceElement.textContent = faces[Math.floor(Math.random() * faces.length)];
            counter++;
            
            if (counter > 10) {
                clearInterval(interval);
                const finalResult = Math.floor(Math.random() * 6) + 1;
                diceElement.textContent = faces[finalResult - 1];
                
                setTimeout(() => {
                    alert(currentLanguage === 'fr' ? 
                        `Tu as fait ${finalResult} ! Visite ${finalResult} secteur(s) minimum !` :
                        `Â¡Sacaste ${finalResult}! Â¡Visita ${finalResult} sector(es) como mÃ­nimo!`);
                }, 500);
            }
        }, 100);
    };

    // FONCTION CRITIQUE : showStandInfo
    window.showStandInfo = function(sector) {
        console.log('showStandInfo appelÃ© avec secteur:', sector);
        
        const sectorData = sectorsData[sector];
        
        if (!sectorData) {
            console.error('Secteur non trouvÃ©:', sector);
            alert('Secteur non disponible: ' + sector);
            return;
        }
        
        console.log('DonnÃ©es secteur trouvÃ©es:', sectorData);
        
        document.getElementById('modalTitle').textContent = sectorData.name[currentLanguage];
        
        const companiesGrid = document.getElementById('companiesGrid');
        companiesGrid.innerHTML = '';
        
        if (!sectorData.companies || sectorData.companies.length === 0) {
            companiesGrid.innerHTML = '<p style="text-align: center; padding: 20px;">Aucune entreprise disponible</p>';
        } else {
            sectorData.companies.forEach((company, index) => {
                const companyCard = document.createElement('div');
                companyCard.className = 'company-card';
                companyCard.innerHTML = `
                    <button class="delete-btn" onclick="event.stopPropagation(); deleteCompany('${sector}', ${index})" title="Supprimer">Ã—</button>
                    <div class="company-name">${company.name}</div>
                    <div class="company-info">${company.info}</div>
                    <div class="company-tags">
                        ${company.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                    </div>
                    <div class="company-actions">
                        <button class="action-icon" onclick="event.stopPropagation(); contactCompany('${company.name}')" title="Contacter">ðŸ“ž</button>
                        <button class="action-icon" onclick="event.stopPropagation(); visitWebsite('${company.name}')" title="Site web">ðŸŒ</button>
                        <button class="action-icon" onclick="event.stopPropagation(); saveCompany('${company.name}')" title="Sauvegarder">ðŸ’¾</button>
                    </div>
                `;
                companiesGrid.appendChild(companyCard);
            });
        }
        
        document.getElementById('companyModal').style.display = 'block';
        console.log('Modal affichÃ©');
    };

    window.closeModal = function() {
        document.getElementById('companyModal').style.display = 'none';
    };

    window.handleModalClick = function(event) {
        if (event.target.id === 'companyModal') {
            closeModal();
        }
    };

    window.showCustomSectorModal = function() {
        document.getElementById('customSectorModal').style.display = 'block';
    };

    window.closeCustomSectorModal = function() {
        document.getElementById('customSectorModal').style.display = 'none';
    };

    window.handleCustomModalClick = function(event) {
        if (event.target.id === 'customSectorModal') {
            closeCustomSectorModal();
        }
    };

    window.createCustomSector = function() {
        const name = document.getElementById('customSectorName').value.trim();
        const icon = document.getElementById('customSectorIcon').value.trim() || 'ðŸ¢';
        const tags = document.getElementById('customSectorTags').value.trim();
        
        if (!name) {
            alert(currentLanguage === 'fr' ? 
                'Veuillez saisir un nom pour le secteur' : 
                'Por favor ingrese un nombre para el sector');
            return;
        }
        
        const newSector = {
            id: 'custom_' + Date.now(),
            name: name,
            icon: icon,
            tags: tags ? tags.split(',').map(tag => tag.trim()) : ['Nouveau'],
            companies: []
        };
        
        customSectors.push(newSector);
        
        document.getElementById('customSectorName').value = '';
        document.getElementById('customSectorIcon').value = '';
        document.getElementById('customSectorTags').value = '';
        
        alert(currentLanguage === 'fr' ? 
            `Secteur "${name}" crÃ©Ã© avec succÃ¨s !` : 
            `Â¡Sector "${name}" creado con Ã©xito!`);
    };

    window.addCustomCompany = function() {
        const name = document.getElementById('companyName').value.trim();
        const activity = document.getElementById('companyActivity').value.trim();
        const email = document.getElementById('companyEmail').value.trim();
        const phone = document.getElementById('companyPhone').value.trim();
        
        if (!name || !activity) {
            alert(currentLanguage === 'fr' ? 
                'Veuillez remplir au minimum le nom et l\'activitÃ© de l\'entreprise' : 
                'Por favor complete al menos el nombre y la actividad de la empresa');
            return;
        }
        
        const newCompany = {
            id: 'company_' + Date.now(),
            name: name,
            activity: activity,
            email: email,
            phone: phone,
            tags: [activity.split(' ')[0], 'Nouveau']
        };
        
        customCompanies.push(newCompany);
        
        const companiesGrid = document.getElementById('customCompaniesGrid');
        const companyCard = document.createElement('div');
        companyCard.className = 'company-card';
        companyCard.style.background = 'linear-gradient(135deg, rgba(149,193,31,0.1), rgba(243,146,0,0.1))';
        companyCard.style.borderColor = '#95c11f';
        companyCard.id = `company-${newCompany.id}`;
        companyCard.innerHTML = `
            <button class="delete-btn" onclick="event.stopPropagation(); deleteCustomCompany('${newCompany.id}')" title="Supprimer">Ã—</button>
            <div class="company-name">${newCompany.name}</div>
            <div class="company-info">${newCompany.activity}</div>
            <div class="company-tags">
                ${newCompany.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
            </div>
            <div style="margin-top: 15px; padding: 15px; background: rgba(255,255,255,0.8); border-radius: 12px; font-size: 0.9rem;">
                ${email ? `<div style="margin-bottom: 8px;"><strong>ðŸ“§ Email:</strong> <a href="mailto:${email}" style="color: #2897d5;">${email}</a></div>` : ''}
                ${phone ? `<div><strong>ðŸ“ž TÃ©l:</strong> <a href="tel:${phone}" style="color: #2897d5;">${phone}</a></div>` : ''}
            </div>
            <div class="company-actions">
                ${email ? `<button class="action-icon" onclick="event.stopPropagation(); window.location.href='mailto:${email}'" title="Envoyer email">ðŸ“§</button>` : ''}
                ${phone ? `<button class="action-icon" onclick="event.stopPropagation(); window.location.href='tel:${phone}'" title="Appeler">ðŸ“ž</button>` : ''}
                <button class="action-icon" onclick="event.stopPropagation(); saveCompany('${newCompany.name}')" title="Sauvegarder">ðŸ’¾</button>
            </div>
        `;
        companiesGrid.appendChild(companyCard);
        
        document.getElementById('companyName').value = '';
        document.getElementById('companyActivity').value = '';
        document.getElementById('companyEmail').value = '';
        document.getElementById('companyPhone').value = '';
        
        alert(currentLanguage === 'fr' ? 
            `Entreprise "${name}" ajoutÃ©e avec succÃ¨s !` : 
            `Â¡Empresa "${name}" agregada con Ã©xito!`);
    };

    window.deleteCustomCompany = function(companyId) {
        if (confirm(currentLanguage === 'fr' ? 
            'Supprimer cette entreprise ?' : 
            'Â¿Eliminar esta empresa?')) {
            
            customCompanies = customCompanies.filter(company => company.id !== companyId);
            
            const companyCard = document.getElementById(`company-${companyId}`);
            if (companyCard) {
                companyCard.remove();
            }
        }
    };

    window.addCompany = function() {
        const companyName = prompt(currentLanguage === 'fr' ? 'Nom de l\'entreprise :' : 'Nombre de la empresa:');
        if (companyName) {
            const companyInfo = prompt(currentLanguage === 'fr' ? 'Description de l\'entreprise :' : 'DescripciÃ³n de la empresa:');
            const companyTags = prompt(currentLanguage === 'fr' ? 'Tags (sÃ©parÃ©s par des virgules) :' : 'Tags (separados por comas):');
            
            const newCompany = {
                name: companyName,
                info: companyInfo || 'Nouvelle entreprise',
                tags: companyTags ? companyTags.split(',').map(tag => tag.trim()) : ['Nouveau']
            };
            
            const companiesGrid = document.getElementById('companiesGrid');
            const companyCard = document.createElement('div');
            companyCard.className = 'company-card';
            companyCard.innerHTML = `
                <div class="company-name">${newCompany.name}</div>
                <div class="company-info">${newCompany.info}</div>
                <div class="company-tags">
                    ${newCompany.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                </div>
                <div class="company-actions">
                    <button class="action-icon" onclick="event.stopPropagation(); contactCompany('${newCompany.name}')" title="Contacter">ðŸ“ž</button>
                    <button class="action-icon" onclick="event.stopPropagation(); visitWebsite('${newCompany.name}')" title="Site web">ðŸŒ</button>
                    <button class="action-icon" onclick="event.stopPropagation(); saveCompany('${newCompany.name}')" title="Sauvegarder">ðŸ’¾</button>
                </div>
            `;
            companiesGrid.appendChild(companyCard);
        }
    };

    window.deleteCompany = function(sector, index) {
        if (confirm(currentLanguage === 'fr' ? 'Supprimer cette entreprise ?' : 'Â¿Eliminar esta empresa?')) {
            sectorsData[sector].companies.splice(index, 1);
            showStandInfo(sector);
        }
    };

    window.contactCompany = function(companyName) {
        alert(currentLanguage === 'fr' ? 
            `Contact avec ${companyName} enregistrÃ© !` :
            `Â¡Contacto con ${companyName} registrado!`);
    };

    window.visitWebsite = function(companyName) {
        alert(currentLanguage === 'fr' ? 
            `Visite du site web de ${companyName}` :
            `Visita del sitio web de ${companyName}`);
    };

    window.saveCompany = function(companyName) {
        if (!gameData.visitedCompanies.includes(companyName)) {
            gameData.visitedCompanies.push(companyName);
        }
        alert(currentLanguage === 'fr' ? 
            `${companyName} ajoutÃ© aux favoris !` :
            `Â¡${companyName} agregado a favoritos!`);
    };

    window.showPathInfo = function() {
        alert(currentLanguage === 'fr' ? 
            'Suis les flÃ¨ches pour dÃ©couvrir ton parcours idÃ©al !' :
            'Â¡Sigue las flechas para descubrir tu recorrido ideal!');
    };

    window.showRestInfo = function() {
        alert(currentLanguage === 'fr' ? 
            'Zone de dÃ©tente : Prends une pause, Ã©change avec d\'autres participants !' :
            'Zona de descanso: Â¡TÃ³mate un descanso, intercambia con otros participantes!');
    };

    // Fonctions des dÃ©fis
    window.completeChallenge = function(card, level) {
        if (!gameData.completedChallenges.includes(level)) {
            gameData.completedChallenges.push(level);
            card.classList.add('completed');
            
            const points = challengePoints[level];
            gameData.points += points;
            updatePointsDisplay();
            
            showPointsAnimation(points);
            
            setTimeout(() => {
                alert(currentLanguage === 'fr' ? 
                    `DÃ©fi ${level} accompli ! +${points} points ! Badge dÃ©bloquÃ© !` :
                    `Â¡DesafÃ­o ${level} completado! Â¡+${points} puntos! Â¡Insignia desbloqueada!`);
            }, 300);
        }
    };

    window.updatePointsDisplay = function()
        {
        document.getElementById('totalPoints').textContent = gameData.points;
        
        let currentRankData = pointsRewards[0];
        let nextRankPoints = 500;
        let currentRankPoints = 0;
        
        const sortedRanks = Object.keys(pointsRewards).map(Number).sort((a, b) => a - b);
        
        for (const points of sortedRanks) {
            if (gameData.points >= points) {
                currentRankData = pointsRewards[points];
                currentRankPoints = points;
            }
        }
        
        for (const points of sortedRanks) {
            if (gameData.points < points) {
                nextRankPoints = points;
                break;
            }
        }
        
        const rankElement = document.getElementById('currentRank');
        if (rankElement) {
            rankElement.innerHTML = `${currentRankData.icon} <span data-fr="${currentRankData.name}" data-es="${currentRankData.name}">${currentRankData.name}</span>`;
            rankElement.style.background = `linear-gradient(135deg, ${currentRankData.color}, rgba(255,255,255,0.2))`;
        }
        
        const progressBar = document.getElementById('progressBar');
        const nextRankInfo = document.getElementById('nextRankInfo');
        
        if (progressBar && nextRankInfo) {
            if (gameData.points >= 2000) {
                progressBar.style.width = '100%';
                nextRankInfo.innerHTML = currentLanguage === 'fr' ? 
                    'ðŸ‘‘ Rang maximum atteint ! FÃ©licitations !' :
                    'ðŸ‘‘ Â¡Rango mÃ¡ximo alcanzado! Â¡Felicitaciones!';
            } else {
                const progress = ((gameData.points - currentRankPoints) / (nextRankPoints - currentRankPoints)) * 100;
                progressBar.style.width = Math.min(progress, 100) + '%';
                
                const nextRankData = pointsRewards[nextRankPoints];
                if (nextRankData) {
                    nextRankInfo.innerHTML = currentLanguage === 'fr' ? 
                        `Prochain rang : ${nextRankData.icon} ${nextRankData.name} (${nextRankPoints} pts)` :
                        `PrÃ³ximo rango: ${nextRankData.icon} ${nextRankData.name} (${nextRankPoints} pts)`;
                }
            }
        }
    };

    window.showPointsAnimation = function(points) {
        const pointsElement = document.createElement('div');
        pointsElement.textContent = `+${points} pts!`;
        pointsElement.style.cssText = `
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(45deg, #f39200, #95c11f);
            color: white;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: clamp(1.5rem, 4vw, 2rem);
            font-weight: 800;
            z-index: 3000;
            border: 4px solid white;
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
            animation: pointsPopup 2s ease-out forwards;
            pointer-events: none;
        `;
        
        if (!document.getElementById('pointsAnimationStyle')) {
            const style = document.createElement('style');
            style.id = 'pointsAnimationStyle';
            style.textContent = `
                @keyframes pointsPopup {
                    0% { transform: translate(-50%, -50%) scale(0.3); opacity: 0; }
                    20% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
                    40% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
                    100% { transform: translate(-50%, -80%) scale(0.8); opacity: 0; }
                }
            `;
            document.head.appendChild(style);
        }
        
        document.body.appendChild(pointsElement);
        
        setTimeout(() => {
            if (pointsElement.parentNode) {
                pointsElement.parentNode.removeChild(pointsElement);
            }
        }, 2000);
    };

    // Fonction pour mettre Ã  jour le compteur d'entreprises visitÃ©es
    window.updateCompaniesCounter = function() {
        const companyInputs = document.querySelectorAll('.company-name-input');
        let count = 0;
        gameData.visitedCompanies = [];
        
        companyInputs.forEach(input => {
            if (input.value.trim() !== '') {
                count++;
                gameData.visitedCompanies.push(input.value.trim());
            }
        });
        
        document.getElementById('companiesVisitedCounter').textContent = count;
    };

    // Fonctions de suivi
    window.toggleCheck = function(checkbox) {
        checkbox.classList.toggle('checked');
    };

    // Fonctions des questions
    window.selectQuestion = function(questionItem) {
        document.querySelectorAll('.question-item').forEach(item => {
            item.classList.remove('selected');
        });
        
        questionItem.classList.add('selected');
        
        setTimeout(() => {
            alert(currentLanguage === 'fr' ? 
                'Question sÃ©lectionnÃ©e ! Tu peux maintenant la poser aux entreprises.' :
                'Â¡Pregunta seleccionada! Ahora puedes hacerla a las empresas.');
        }, 200);
    };

    window.addPersonalQuestion = function() {
        const question = prompt(currentLanguage === 'fr' ? 
            'Ã‰cris ta question personnelle :' :
            'Escribe tu pregunta personal:');
        
        if (question) {
            const questionsContainer = document.querySelector('.questions-container');
            const questionItem = document.createElement('div');
            questionItem.className = 'question-item';
            questionItem.onclick = function() { selectQuestion(this); };
            questionItem.innerHTML = `
                <div class="question-icon">âœï¸</div>
                <div>${question}</div>
            `;
            
            const button = document.querySelector('.personal-questions');
            questionsContainer.insertBefore(questionItem, button);
        }
    };

    // Fonctions de validation
    window.unlockBadge = function(badge, level) {
        if (!gameData.badges.includes(level)) {
            gameData.badges.push(level);
            badge.classList.add('unlocked');
            
            setTimeout(() => {
                alert(currentLanguage === 'fr' ? 
                    `Badge ${level} dÃ©bloquÃ© ! FÃ©licitations !` :
                    `Â¡Insignia ${level} desbloqueada! Â¡Felicitaciones!`);
            }, 300);
        }
    };

    window.updateMobility = function() {
        const steps = parseFloat(document.getElementById('steps').value) || 0;
        const bike = parseFloat(document.getElementById('bike').value) || 0;
        const publicTransport = document.getElementById('publicTransport').checked;
        const carpool = document.getElementById('carpool').checked;
        
        gameData.mobility = { steps, bike, publicTransport, carpool };
        
        let ecoScore = 0;
        ecoScore += Math.floor(steps / 100);
        ecoScore += bike * 20;
        if (publicTransport) ecoScore += 50;
        if (carpool) ecoScore += 30;
        
        document.getElementById('ecoScore').textContent = ecoScore;
        
        if (ecoScore >= 100) {
            const ecoBadge = document.querySelector('.ml-badge-bonus');
            if (!ecoBadge.classList.contains('unlocked')) {
                unlockBadge(ecoBadge, 6);
                if (!gameData.completedChallenges.includes(6)) {
                    gameData.completedChallenges.push(6);
                    gameData.points += challengePoints[6];
                    updatePointsDisplay();
                    showPointsAnimation(challengePoints[6]);
                }
            }
        }
    };

    window.generateQR = function() {
        document.getElementById('qrCode').style.display = 'block';
        document.getElementById('qrCode').innerHTML = `
            <div style="font-size: 0.8rem; text-align: center;">
                <div style="margin-bottom: 10px;">ðŸ“± QR Code gÃ©nÃ©rÃ© !</div>
                <div style="background: white; padding: 10px; border-radius: 8px; color: black;">
                    ${playerData.firstName} ${playerData.lastName}<br>
                    Badges: ${gameData.badges.length}/6<br>
                    Score: ${gameData.points} pts<br>
                    Entreprises: ${gameData.visitedCompanies.length}
                </div>
            </div>
        `;
    };

    // Fonction pour tÃ©lÃ©charger le rapport en PDF
    window.downloadPDFReport = function() {
        if (typeof window.jspdf === 'undefined') {
            alert('Erreur : BibliothÃ¨que PDF non chargÃ©e. TÃ©lÃ©chargement du rapport en texte...');
            downloadReport();
            return;
        }

        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();

        let currentRank = 'DÃ©butant MotivÃ©';
        const sortedRanks = Object.keys(pointsRewards).map(Number).sort((a, b) => a - b);
        for (const points of sortedRanks) {
            if (gameData.points >= points) {
                currentRank = pointsRewards[points].name;
            }
        }

        doc.setFillColor(243, 146, 0);
        doc.rect(0, 0, 210, 40, 'F');
        doc.setTextColor(255, 255, 255);
        doc.setFontSize(24);
        doc.setFont(undefined, 'bold');
        doc.text('RAPPORT MISSION EMPLOI', 105, 20, { align: 'center' });
        doc.setFontSize(12);
        doc.text('Forum Mission Locale Pays Basque', 105, 30, { align: 'center' });

        doc.setTextColor(0, 0, 0);
        doc.setFontSize(14);
        doc.setFont(undefined, 'bold');
        doc.text('PARTICIPANT', 20, 55);
        doc.setFontSize(11);
        doc.setFont(undefined, 'normal');
        doc.text(`Nom: ${playerData.firstName} ${playerData.lastName}`, 20, 65);
        doc.text(`Date: ${new Date().toLocaleDateString('fr-FR')}`, 20, 72);

        doc.setFillColor(149, 193, 31);
        doc.rect(0, 80, 210, 35, 'F');
        doc.setTextColor(255, 255, 255);
        doc.setFontSize(16);
        doc.setFont(undefined, 'bold');
        doc.text(`SCORE TOTAL: ${gameData.points} POINTS`, 105, 95, { align: 'center' });
        doc.setFontSize(12);
        doc.text(`Rang: ${currentRank}`, 105, 105, { align: 'center' });

        doc.setTextColor(0, 0, 0);
        doc.setFontSize(14);
        doc.setFont(undefined, 'bold');
        doc.text('BADGES OBTENUS', 20, 130);
        doc.setFontSize(11);
        doc.setFont(undefined, 'normal');
        
        const badges = [
            { level: 1, name: 'Premier Contact', points: 100 },
            { level: 2, name: 'Communicateur', points: 150 },
            { level: 3, name: 'Candidat Pro', points: 200 },
            { level: 4, name: 'Networker', points: 300 },
            { level: 5, name: 'Job Hunter', points: 500 },
            { level: 6, name: 'Eco-Warrior', points: 250 }
        ];

        let yPos = 140;
        badges.forEach(badge => {
            const obtained = gameData.badges.includes(badge.level) ? 'âœ“' : 'âœ—';
            doc.text(`${obtained} ${badge.name} (+${badge.points} pts)`, 25, yPos);
            yPos += 7;
        });

        doc.setFontSize(14);
        doc.setFont(undefined, 'bold');
        doc.text('ENTREPRISES VISITEES', 20, yPos + 10);
        doc.setFontSize(11);
        doc.setFont(undefined, 'normal');
        doc.text(`Nombre total: ${gameData.visitedCompanies.length}`, 20, yPos + 20);
        
        yPos += 30;
        if (gameData.visitedCompanies.length > 0) {
            gameData.visitedCompanies.forEach((company, index) => {
                if (yPos > 270) {
                    doc.addPage();
                    yPos = 20;
                }
                doc.text(`${index + 1}. ${company}`, 25, yPos);
                yPos += 7;
            });
        } else {
            doc.text('Aucune entreprise visitee', 25, yPos);
            yPos += 7;
        }

        if (yPos > 240) {
            doc.addPage();
            yPos = 20;
        }
        
        doc.setFontSize(14);
        doc.setFont(undefined, 'bold');
        doc.text('MOBILITE DURABLE', 20, yPos + 10);
        doc.setFontSize(11);
        doc.setFont(undefined, 'normal');
        yPos += 20;
        doc.text(`Nombre de pas: ${gameData.mobility.steps}`, 25, yPos);
        yPos += 7;
        doc.text(`Velo: ${gameData.mobility.bike} km`, 25, yPos);
        yPos += 7;
        doc.text(`Transport public: ${gameData.mobility.publicTransport ? 'Oui' : 'Non'}`, 25, yPos);
        yPos += 7;
        doc.text(`Covoiturage: ${gameData.mobility.carpool ? 'Oui' : 'Non'}`, 25, yPos);
        yPos += 7;
        doc.text(`Score Eco: ${document.getElementById('ecoScore').textContent} points`, 25, yPos);

        const pageCount = doc.internal.getNumberOfPages();
        for (let i = 1; i <= pageCount; i++) {
            doc.setPage(i);
            doc.setFontSize(9);
            doc.setTextColor(128, 128, 128);
            doc.text(`Page ${i} / ${pageCount}`, 105, 290, { align: 'center' });
        }

        doc.save(`rapport-mission-emploi-${playerData.firstName}-${playerData.lastName}.pdf`);
    };

    window.downloadReport = function() {
        let currentRank = 'DÃ©butant MotivÃ©';
        const sortedRanks = Object.keys(pointsRewards).map(Number).sort((a, b) => a - b);
        for (const points of sortedRanks) {
            if (gameData.points >= points) {
                currentRank = pointsRewards[points].name;
            }
        }
        
        let companiesList = '';
        if (gameData.visitedCompanies.length > 0) {
            companiesList = gameData.visitedCompanies.map((company, index) => 
                `${index + 1}. ${company}`
            ).join('\n');
        } else {
            companiesList = 'Aucune entreprise visitÃ©e';
        }
        
        const report = `
RAPPORT MISSION EMPLOI
======================

Participant: ${playerData.firstName} ${playerData.lastName}
Forum: Forum Mission Locale Pays Basque

SCORE TOTAL: ${gameData.points} POINTS
RANG ATTEINT: ${currentRank}

BADGES OBTENUS: ${gameData.badges.length}/6
- ${gameData.badges.includes(1) ? 'âœ“' : 'âœ—'} Premier Contact (+100 pts)
- ${gameData.badges.includes(2) ? 'âœ“' : 'âœ—'} Communicateur (+150 pts)
- ${gameData.badges.includes(3) ? 'âœ“' : 'âœ—'} Candidat Pro (+200 pts)
- ${gameData.badges.includes(4) ? 'âœ“' : 'âœ—'} Networker (+300 pts)
- ${gameData.badges.includes(5) ? 'âœ“' : 'âœ—'} Job Hunter (+500 pts)
- ${gameData.badges.includes(6) ? 'âœ“' : 'âœ—'} Ã‰co-Warrior (+250 pts)

DEFIS ACCOMPLIS: ${gameData.completedChallenges.length}/6
Points gagnÃ©s par dÃ©fis: ${gameData.completedChallenges.reduce((total, level) => total + challengePoints[level], 0)} pts

ENTREPRISES VISITEES: ${gameData.visitedCompanies.length}
${companiesList}

MOBILITE DURABLE:
- Nombre de pas: ${gameData.mobility.steps}
- VÃ©lo: ${gameData.mobility.bike} km
- Transport public: ${gameData.mobility.publicTransport ? 'Oui' : 'Non'}
- Covoiturage: ${gameData.mobility.carpool ? 'Oui' : 'Non'}
- Score Ã‰co: ${document.getElementById('ecoScore').textContent} points

Date: ${new Date().toLocaleDateString()}
        `;
        
        const blob = new Blob([report], { type: 'text/plain' });
        const link = document.createElement('a');
        link.href = URL.createObjectURL(blob);
        link.download = `rapport-mission-emploi-${playerData.firstName}-${playerData.lastName}.txt`;
        link.click();
    };

    window.shareResults = function() {
        let currentRank = 'DÃ©butant MotivÃ©';
        const sortedRanks = Object.keys(pointsRewards).map(Number).sort((a, b) => a - b);
        for (const points of sortedRanks) {
            if (gameData.points >= points) {
                currentRank = pointsRewards[points].name;
            }
        }
        
        const text = `J'ai participÃ© au Forum Mission Locale Pays Basque ! ðŸ† ${gameData.points} points - Rang: ${currentRank} ! ðŸŽ¯ ${gameData.badges.length}/6 badges obtenus ! ðŸ¢ ${gameData.visitedCompanies.length} entreprises visitÃ©es ! Score Ã©co: ${document.getElementById('ecoScore').textContent} points ðŸŒ±`;
        
        if (navigator.share) {
            navigator.share({
                title: 'Mission Emploi - Mes rÃ©sultats',
                text: text
            });
        } else {
            navigator.clipboard.writeText(text).then(() => {
                alert(currentLanguage === 'fr' ? 
                    'RÃ©sultats copiÃ©s dans le presse-papiers !' :
                    'Â¡Resultados copiados al portapapeles!');
            });
        }
    };

    // Initialisation au chargement de la page
    document.addEventListener('DOMContentLoaded', function() {
        console.log('Page chargÃ©e, initialisation...');
        
    // Test de disponibilitÃ© des fonctions
    console.log('showStandInfo disponible:', typeof window.showStandInfo);
    console.log('sectorsData disponible:', typeof sectorsData);
    
    setLanguage('fr');
    showPage(1);
    updateMobility();
    updatePointsDisplay();
    updateCompaniesCounter();
    
    // ========== AJOUTEZ CE BLOC ICI ==========
    
    // Attacher les Ã©vÃ©nements de clic aux secteurs
    console.log('Ajout des Ã©vÃ©nements de clic...');
    
    document.querySelectorAll('.sector-stand').forEach(function(sector) {
        sector.addEventListener('click', function() {
            console.log('Secteur cliquÃ©!', this.className);
            
            // Identifier le secteur cliquÃ©
            let sectorId = '';
            if (this.classList.contains('tech-sector')) sectorId = 'tech';
            else if (this.classList.contains('resto-sector')) sectorId = 'resto';
            else if (this.classList.contains('sante-sector')) sectorId = 'sante';
            else if (this.classList.contains('commerce-sector')) sectorId = 'commerce';
            else if (this.classList.contains('artisan-sector')) sectorId = 'artisan';
            else if (this.classList.contains('service-sector')) sectorId = 'service';
            else if (this.classList.contains('tourisme-sector')) sectorId = 'tourisme';
            else if (this.classList.contains('transport-sector')) sectorId = 'transport';
            else if (this.classList.contains('custom-sector')) {
                showCustomSectorModal();
                return;
            }
            
            if (sectorId) {
                console.log('Ouverture du secteur:', sectorId);
                showStandInfo(sectorId);
            }
        });
    });
    
    // Attacher les Ã©vÃ©nements aux boutons de navigation
    document.querySelectorAll('.nav-btn').forEach(function(btn, index) {
        btn.addEventListener('click', function() {
            showPage(index + 1);
        });
    });
    
    // Attacher Ã©vÃ©nement au dÃ©
    const dice = document.querySelector('.game-dice');
    if (dice) {
        dice.addEventListener('click', rollDice);
    }
    
    // Attacher Ã©vÃ©nement Ã  l'entrÃ©e du forum
    const entrance = document.querySelector('.entrance-sign');
    if (entrance) {
        entrance.addEventListener('click', registerPlayer);
    }
    
    // Attacher Ã©vÃ©nement au QG
    const hq = document.querySelector('.hq-building');
    if (hq) {
        hq.addEventListener('click', function() {
            alert(currentLanguage === 'fr' ? 
                'ðŸ  Quartier GÃ©nÃ©ral de la Mission Locale - Point de dÃ©part et validation des badges' : 
                'ðŸ  Cuartel General de la MisiÃ³n Local - Punto de partida y validaciÃ³n de insignias');
        });
    }
    
    // Attacher Ã©vÃ©nement Ã  la zone de repos
    const restZone = document.querySelector('.rest-zone');
    if (restZone) {
        restZone.addEventListener('click', showRestInfo);
    }
    
    // Attacher Ã©vÃ©nements aux flÃ¨ches du parcours
    document.querySelectorAll('.path-arrow').forEach(function(arrow) {
        arrow.addEventListener('click', showPathInfo);
    });
    
    // Attacher Ã©vÃ©nements aux cartes de dÃ©fi
    document.querySelectorAll('.challenge-card').forEach(function(card, index) {
        card.addEventListener('click', function() {
            const level = index + 1;
            completeChallenge(this, level);
        });
    });
    
    // Attacher Ã©vÃ©nements aux items de questions
    document.querySelectorAll('.question-item').forEach(function(item) {
        item.addEventListener('click', function() {
            selectQuestion(this);
        });
    });
    
    // Attacher Ã©vÃ©nements aux badges
    document.querySelectorAll('.badge-sticker').forEach(function(badge, index) {
        badge.addEventListener('click', function() {
            const level = index + 1;
            unlockBadge(this, level);
        });
    });
    
    console.log('Ã‰vÃ©nements attachÃ©s avec succÃ¨s!');
    
    // ========== FIN DU BLOC Ã€ AJOUTER ==========
    
    console.log('Initialisation terminÃ©e');
});
</script>
